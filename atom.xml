<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Khazix</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="demonxian3.github.io/"/>
  <updated>2019-06-16T17:21:21.000Z</updated>
  <id>demonxian3.github.io/</id>
  
  <author>
    <name>Khazix Li</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>loadImage</title>
    <link href="demonxian3.github.io/2019/06/16/19061601_loadimg/"/>
    <id>demonxian3.github.io/2019/06/16/19061601_loadimg/</id>
    <published>2019-06-16T16:44:38.000Z</published>
    <updated>2019-06-16T17:21:21.000Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><ul><li><a href="#0-wang-ye-shao-yong-tu-pian-jia-su-jia-zai">0. 网页少用图片 (加速加载)</a></li><li><a href="#1-ya-suo-tu-pian-da-xiao-jia-su-jia-zai">1. 压缩图片大小 (加速加载)</a></li><li><a href="#2-shi-yong-svg-ge-shi-de-tu-pian-jia-su-jia-zai">2. 使用 svg 格式的图片 (加速加载)</a></li><li><a href="#3-tu-pian-cai-yong-base64-fang-shi-jia-zai-jia-su-jia-zai-xiao-guo-yi-ban">3. 图片采用 base64 方式加载 (加速加载，效果一般)</a></li><li><a href="#4-li-yong-huan-cun-fang-zhi-chong-fu-jia-zai-yong-hu-ti-yan">4. 利用缓存防止重复加载（用户体验）</a></li><li><a href="#5-jia-zai-wan-cheng-hou-xian-shi-yong-hu-ti-yan">5. 加载完成后显示（用户体验）</a></li><li><a href="#6-gen-ju-she-bei-jia-zai-tu-pian-jie-sheng-liu-liang">6. 根据设备加载图片 （节省流量）</a></li></ul><!-- tocstop --></div><div id="0-wang-ye-shao-yong-tu-pian-jia-su-jia-zai"></div> <br><br><br><h3>0. 网页少用图片 (加速加载)</h3><p>看起来像是废话，但确实是最明显的加速</p><div id="1-ya-suo-tu-pian-da-xiao-jia-su-jia-zai"></div> <br><br><br><h3>1. 压缩图片大小 (加速加载)</h3><ul><li>安装</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install  ImageMagick</span><br></pre></td></tr></table></figure><ul><li>查看图片信息</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">identify 1.jpg</span><br></pre></td></tr></table></figure><blockquote><p>1.jpg JPEG 960x540 960x540+0+0 8-bit DirectClass 98.3KB 0.000u 0:00.000  </p></blockquote><p>可以看到图片大小，像素信息，图片格式</p><ul><li><p>调整像素</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">convert -resize 1024x768  src.jpg   dst.jpg</span><br></pre></td></tr></table></figure></li><li><p>按比例缩小</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">convert -sample 50%x50%   src.jpg   dst.jpg</span><br></pre></td></tr></table></figure></li><li><p>批量调整</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">find ./ -regex <span class="string">'.*\(jpg\|JPG\|png\|PNG\|jpeg\)'</span> -size +50k -<span class="built_in">exec</span>  \</span><br><span class="line">     convert -resize 290x160 -quality 75 &#123;&#125; &#123;&#125; \;</span><br></pre></td></tr></table></figure></li></ul><p>将大于 50k 的图片重新调整质量调为 75，像素为 290x160</p><div id="2-shi-yong-svg-ge-shi-de-tu-pian-jia-su-jia-zai"></div> <br><br><br><h3>2. 使用 svg 格式的图片 (加速加载)</h3><blockquote><p>SVG 是一种基于 XML 语法的图像格式，全称是可缩放矢量图（Scalable Vector Graphics）。其他图像格式都是基于像素处理的，SVG 则是属于对图像的形状描述，所以它本质上是文本文件，体积较小，且不管放大多少倍都不会失真。  </p></blockquote><p><a href="http://www.ruanyifeng.com/blog/2018/08/svg.html" target="_blank" rel="noopener">SVG 图像入门教程</a></p><div id="3-tu-pian-cai-yong-base64-fang-shi-jia-zai-jia-su-jia-zai-xiao-guo-yi-ban"></div> <br><br><br><h3>3. 图片采用 base64 方式加载 (加速加载，效果一般)</h3><p>每个图片都对应一个单独请求，若图片在国外会因网络传输速度导致加载慢，通过如下方式减少网络请求。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAABoSURBVBhXFYwxCoMwAAAvUQmCrcWhHfy2m+A7+oauBaEfkC6G2BZJSJo0veW45UTKkFlXTVkVtMf2nwhj3um1PfE+kEKNlJLu0mT7B59l5BCu3CfFbfiiZ4Vwzia3L8QI1pwhj099xQ84aSphPUM//AAAAABJRU5ErkJggg=="</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这种方式可能比较陌生，平时src填写的都是本地或者网络地址，而这里的src是调用base64解码器解码那一大串图片数据，相当于图片和html绑定在一起了。</p><ul><li><p>URI (Uniform Resource Identifier)<br>统一资源标识符,服务器资源名被称为统一资源标识符。</p></li><li><p>URL (Uniform Resource Locator)<br>统一资源定位符，描述了一台特定服务器上某资源的特定位置。</p></li><li><p>URN (Uniform Resource Name)<br>统一资源名称   </p></li><li><p>Data URI Scheme<br>DUS允许我们使用内联（inline-code）的方式在网页中包含数据，目的是将一些小的数据，直接嵌入<br>到网页中，从而不用再从外部文件载入。常用于将图片嵌入网页。</p></li><li><p><code>三者关系</code><br><img src="https://user-images.githubusercontent.com/24609511/59560723-0c9ae180-9049-11e9-8fb6-5070964e3727.png" alt="a"></p></li></ul><ul><li><p>支持的类型</p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span>:,文本数据</span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:text/plain,文本数据</span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:text/html,<span class="type">HTML</span>代码</span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:text/html;base64,base64编码的<span class="type">HTML</span>代码</span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:text/css,<span class="type">CSS</span>代码</span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:text/css;base64,base64编码的<span class="type">CSS</span>代码</span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:text/<span class="type">JavaScript</span>,<span class="type">Javascript</span>代码</span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:text/javascript;base64,base64编码的<span class="type">Javascript</span>代码</span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:image/gif;base64,base64编码的gif图片数据</span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:image/png;base64,base64编码的png图片数据</span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:image/jpeg;base64,base64编码的jpeg图片数据</span></span><br><span class="line"><span class="class"><span class="keyword">data</span>:image/x-icon;base64,base64编码的icon图片数据</span></span><br></pre></td></tr></table></figure></li><li><p>优点</p><ul><li>减少网络请求次数</li><li>外部资源受限时不造成影响</li></ul></li><li><p>缺点</p><ul><li>base64编码后数据通常比源数据大1/3</li><li>移动端性能比较低。</li><li>不会被浏览器缓存，每次访问页面都被下载一次    </li></ul><p>第三个可以用css的background-image缓存起来，见下一节</p></li></ul><div id="4-li-yong-huan-cun-fang-zhi-chong-fu-jia-zai-yong-hu-ti-yan"></div> <br><br><br><h3>4. 利用缓存防止重复加载（用户体验）</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">preload-img</span> &#123; <span class="attribute">background-image</span>:<span class="built_in">url</span>(/img/bg.jpg); &#125;</span><br></pre></td></tr></table></figure><p>把图片放到css的好处是，当多个页面使用同个css文件，不会重复加载图片<br>背景图很适合放到css，但这要等到css加载完后，执行到<code>url()</code>才开始加载</p><div id="5-jia-zai-wan-cheng-hou-xian-shi-yong-hu-ti-yan"></div> <br><br><br><h3>5. 加载完成后显示（用户体验）</h3><p>默认img标签加载效果如下<br><img src="https://user-images.githubusercontent.com/24609511/59560521-f17aa280-9045-11e9-92b7-19ec8f71f8d7.gif" alt="a"><br>这里可用js来预加载，图片加载好后在显示出来，如下</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"bg.jpg"</span> <span class="attr">style</span>=<span class="string">"display:none;"</span> <span class="attr">id</span>=<span class="string">"bg"</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> img = <span class="keyword">new</span> Image()</span><br><span class="line">img.src = <span class="string">'bg.jpg'</span>;</span><br><span class="line">img.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="built_in">document</span>.getElementById(<span class="string">'bg'</span>).style.display = <span class="string">'inline'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里有个小技巧，第三节提及image 的src也可以加载 css 和 js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> jq= <span class="keyword">new</span> Image()</span><br><span class="line">jq.src = <span class="string">'jquery.js'</span>;</span><br><span class="line">jq.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="comment">//jquery ok .do something</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div id="6-gen-ju-she-bei-jia-zai-tu-pian-jie-sheng-liu-liang"></div> <br><br><br><h3>6. 根据设备加载图片 （节省流量）</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">srcset</span>=<span class="string">"pic_w350.jpg 1x, pic_w640.jpg 2x"</span> <span class="attr">src</span>=<span class="string">"pic_w350.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br></pre></td></tr></table></figure><p>小屏加载350px宽图片 ， 大屏幕加载 640px宽图片</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input id=&quot;toc-toggle&quot; type=&quot;checkbox&quot;&gt;

&lt;!-- toc --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>MarkDown 语法</title>
    <link href="demonxian3.github.io/2018/08/24/18082401_markdown/"/>
    <id>demonxian3.github.io/2018/08/24/18082401_markdown/</id>
    <published>2018-08-24T00:00:00.000Z</published>
    <updated>2019-06-16T17:28:33.000Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><ul><li><a href="#0x00-gai-shu">0x00 概述</a></li><li><a href="#0x01-biao-ti">0x01 标题</a></li><li><a href="#0x02-kuai">0x02 块</a><ul><li><a href="#block-ke-yi-jia-shang-h2-biao-ti">block 可以加上h2 标题</a></li></ul></li><li><a href="#0x03-lie-biao">0x03 列表</a></li><li><a href="#0x04-lian-jie">0x04 链接</a><ul><li><a href="#xing-nei-lian-jie">行内链接</a></li><li><a href="#can-kao-lian-jie">参考链接</a></li><li><a href="#zi-dong-lian-jie">自动链接</a></li></ul></li><li><a href="#0x05-tu-xiang">0x05 图像</a></li><li><a href="#0x06-fan-yin-hao">0x06 反引号</a></li><li><a href="#0x07-fen-ge-xian">0x07 分隔线</a></li><li><a href="#0x08-zhuan-yi">0x08 转义</a></li><li><a href="#0x09-zhu-shi">0x09 注释</a></li><li><a href="#0x0a-biao-ge">0x0A 表格</a></li><li><a href="#0x0b-kong-ge">0x0B 空格</a></li><li><a href="#0x0c-zi-ti">0x0C 字体</a></li></ul><!-- tocstop --></div><p>参考链接:  <a href="https://www.appinn.com/markdown/index.html#hr" target="_blank" rel="noopener">https://www.appinn.com/markdown/index.html#hr</a><br>参考链接： <a href="https://blog.csdn.net/qcx321/article/details/53780672#9-%E7%B4%A2%E5%BC%95%E8%B6%85%E9%93%BEreference%E6%96%B9%E5%BC%8F" target="_blank" rel="noopener">https://blog.csdn.net/qcx321/article/details/53780672#9-%E7%B4%A2%E5%BC%95%E8%B6%85%E9%93%BEreference%E6%96%B9%E5%BC%8F</a>   </p><div id="0x00-gai-shu"></div> <br><br><br><h1>0x00 概述</h1><blockquote><p>  <font color="red">易读易写</font></p><p>  可读性，无论如何，都是最重要的。一份使用 Markdown 格式撰写的文件应该可以直接以纯文本发布，<br>  并且看起来不会像是由许多标签或是格式指令所构成。Markdown 语法受到一些既有 <code>text-to-HTML</code> 格式的影响，<br>  包括 <code>Setext</code>、<code>atx</code>、<code>Textile</code>、<code>reStructuredTex</code>t、<code>Grutatext</code> 和 <code>EtText</code>，而最大灵感来源其实是纯文本电子邮件的格式。</p><p>  总之， Markdown 的语法全由一些符号所组成，这些符号经过精挑细选，其作用一目了然。<br>  比如：在文字两旁加上星号，看起来就像<em>强调</em>。Markdown 的列表看起来，嗯，就是列表。<br>  Markdown 的区块引用看起来就真的像是引用一段文字，就像你曾在电子邮件中见过的那样。  </p><p>   <font color="blue">兼容HTML</font><br>  Markdown 语法的目标是：成为一种适用于网络的书写语言。</p><p>  Markdown 不是想要取代 HTML，甚至也没有要和它相近，它的语法种类很少，只对应 HTML 标记的一小部分。<br>  Markdown 的构想不是要使得 HTML 文档更容易书写。在我看来， HTML 已经很容易写了。Markdown 的理念是，<br>  能让文档更容易读、写和随意改。HTML 是一种发布的格式，Markdown 是一种书写的格式。<br>  就这样，Markdown 的格式语法只涵盖纯文本可以涵盖的范围。</p><p>  不在 Markdown 涵盖范围之内的标签，都可以直接在文档里面用 HTML 撰写。不需要额外标注这是 HTML 或是 Markdown；<br>  只要直接加标签就可以了。要制约的只有一些区块元素――比如div p pre table等标签，<br>  必须在前后加上空行与其它内容区隔开，还要求它们的开始标签与结尾标签不能用制表符或空格来缩进。<br>  Markdown 的生成器有足够智能，不会在 HTML 区块标签外加上不必要的p标签。</p></blockquote><div id="0x01-biao-ti"></div> <br><br><br><h1>0x01 标题</h1><ul><li>Setext 形式标题   </li></ul><p>Setext 形式是用底线的形式，利用 = （最高阶标题）和 - （第二阶标题）</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">A first level header</span><br><span class="line">=======================</span><br><span class="line"></span><br><span class="line">A second level header</span><br><span class="line">-----------------------</span><br></pre></td></tr></table></figure><ul><li>Atx 形式标题<br>Atx 形式在行首插入 1 ~ 6 个, 对应标签 h1 ~ h6<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># h1</span><br><span class="line">## h2</span><br><span class="line">### h3</span><br><span class="line">#### h4</span><br><span class="line">##### h5</span><br><span class="line">###### h6</span><br></pre></td></tr></table></figure></li></ul><hr><div id="0x02-kuai"></div> <br><br><br><h1>0x02 块</h1><p>区块引用方式是在行最前面加上<code>&gt;</code>即可    </p><p>强调可以使用<code>*</code> 或 <code>_</code>包围, 两个符号效果一样, 单符号强调为斜体,  双符号强调为粗体    </p><p>大于号转义用<code>&amp;gt;</code> 或者 <code>\&gt;</code>   </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash"> *星号斜体*.  _下划线斜体_  **星号粗体** __下划线粗体__   </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">  </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> 块引用使用大于号, 大于号转义&amp;gt;    </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> </span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> <span class="comment">## block 可以加上h2 标题</span></span></span><br></pre></td></tr></table></figure><blockquote><p><em>星号斜体</em>  <em>下划线斜体</em>   <strong>星号粗体</strong>   <strong>下划线粗体</strong>   </p><p>块引用使用大于号, 大于号转义&gt;    </p><div id="block-ke-yi-jia-shang-h2-biao-ti"></div> <br><br><br><h2>block 可以加上h2 标题</h2></blockquote><div id="0x03-lie-biao"></div> <br><br><br><h1>0x03 列表</h1><p>无序列表可以用 <code>*</code> <code>-</code> <code>+</code> 在最前面，内容与符号隔一个空格, 以下三种都是无序列表</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>Demon</span><br><span class="line"><span class="bullet">* </span>Tim</span><br><span class="line"><span class="bullet">* </span>Darkleaft</span><br><span class="line"></span><br><span class="line"><span class="bullet">+ </span>Candy</span><br><span class="line"><span class="bullet">+ </span>Mary</span><br><span class="line"><span class="bullet">+ </span>Booze</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>这些</span><br><span class="line"><span class="bullet">- </span>都是</span><br><span class="line"><span class="bullet">- </span>无序</span><br></pre></td></tr></table></figure><ul><li>Demon</li><li>Tim</li><li>Darkleaft</li></ul><ul><li>Candy</li><li>Mary</li><li>Booze</li></ul><ul><li>这些</li><li>都是</li><li>无序</li></ul><p>有序列表用数字</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1. </span>这是</span><br><span class="line"><span class="bullet">2. </span>有序</span><br><span class="line"><span class="bullet">3. </span>列表</span><br></pre></td></tr></table></figure><ol><li>这是</li><li>有序</li><li>列表</li></ol><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>这是列表</span><br><span class="line">如果在下面一行有空格，那么会被p标签包起来</span><br><span class="line"></span><br><span class="line"><span class="bullet">* </span>这是列表</span><br></pre></td></tr></table></figure><ul><li><p>这是列表<br>如果在下面一行有空格，那么会被p标签包起来</p></li><li><p>这是列表</p></li></ul><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> 这是列表</span><br><span class="line">如果没有空行，元素和上面元素黏在一块</span><br><span class="line"><span class="number">2</span> 这是列表</span><br></pre></td></tr></table></figure><p>1 这是列表<br>如果没有空行，元素和上面元素黏在一块<br>2 这是列表</p><p><code>默认会加上p标签   后面三个空格会换行</code>   </p><p>如果放上四个空格或一个tab在最前面。改行就会被段落化</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">&amp;nbsp</span>;<span class="variable">&amp;nbsp</span>;<span class="variable">&amp;nbsp</span>;<span class="variable">&amp;nbsp</span>;<span class="meta"># 这是一个例子</span></span><br></pre></td></tr></table></figure><pre><code># 这是一个例子</code></pre><div id="0x04-lian-jie"></div> <br><br><br><h1>0x04 链接</h1><div id="xing-nei-lian-jie"></div> <br><br><br><h3>行内链接</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">baidu</span>](<span class="link">http://www.baidu.com "with a title"</span>)</span><br></pre></td></tr></table></figure><p><a href="http://www.baidu.com" title="with a title" target="_blank" rel="noopener">baidu</a>   </p><div id="can-kao-lian-jie"></div> <br><br><br><h3>参考链接</h3><p>可以先定义一个名称，后面再为名称补上链接</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">Baidu</span>][<span class="symbol">1</span>] [<span class="string">QQ</span>][<span class="symbol">a</span>] [<span class="string">sina</span>][<span class="symbol">+</span>]   </span><br><span class="line"></span><br><span class="line">[<span class="symbol">1</span>]: <span class="link">http://www.baidu.com "with a title"   </span></span><br><span class="line">[<span class="symbol">a</span>]: <span class="link">http://www.qq.com "with a title"   </span></span><br><span class="line">[<span class="symbol">+</span>]: <span class="link">http://www.sina.com "this is title"</span></span><br></pre></td></tr></table></figure><p><a href="http://www.baidu.com" title="with a title" target="_blank" rel="noopener">Baidu</a> <a href="http://www.qq.com" title="with a title" target="_blank" rel="noopener">QQ</a> <a href="http://www.sina.com" title="this is title" target="_blank" rel="noopener">sina</a>   </p><div id="zi-dong-lian-jie"></div> <br><br><br><h3>自动链接</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="string">http:</span><span class="comment">//www.baidu.com&gt;</span></span><br></pre></td></tr></table></figure><p><a href="http://www.baidu.com" target="_blank" rel="noopener">http://www.baidu.com</a></p><div id="0x05-tu-xiang"></div> <br><br><br><h1>0x05 图像</h1><p>行内形式: </p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">alt text</span>](<span class="link">http://118.89.51.198/qrcode.png "with a title"</span>)</span><br></pre></td></tr></table></figure><p><img src="http://118.89.51.198/qrcode.png" alt="alt text" title="with a title">   </p><p>参考形式: </p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">err text</span>][<span class="symbol">id</span>]</span><br><span class="line"></span><br><span class="line">[<span class="symbol">id</span>]: <span class="link">https://ss0.baidu.com/73t1bjeh1BF3odCf/it/u=1817457932,3341712964&amp;fm=85&amp;s=0941A34603F1BBC054C31903030090DA "with a title"</span></span><br></pre></td></tr></table></figure><p><img src="https://ss0.baidu.com/73t1bjeh1BF3odCf/it/u=1817457932,3341712964&fm=85&s=0941A34603F1BBC054C31903030090DA" alt="err text" title="with a title"></p><div id="0x06-fan-yin-hao"></div> <br><br><br><h1>0x06 反引号</h1><p>在一般的段落文字中，你可以使用 <code>反引号</code> 来标记代码区段，区段内的 <code>&amp; &lt;  &gt;</code>三个符号 </p><p>都会被自动的转换成 HTML 实体，这项特性让你可以很容易的在代码区段内插入 HTML 码 </p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">` <span class="meta"># &gt; &amp; &lt; _ * `</span></span><br></pre></td></tr></table></figure><p><code># &gt; &amp; &lt; _ *</code></p><div id="0x07-fen-ge-xian"></div> <br><br><br><h1>0x07 分隔线</h1><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span><span class="bullet">* *</span></span><br><span class="line"><span class="bullet">- </span>- - </span><br><span class="line"><span class="strong">*****</span><span class="strong">*****</span>*</span><br><span class="line">-----------</span><br></pre></td></tr></table></figure><hr><hr><hr><hr><div id="0x08-zhuan-yi"></div> <br><br><br><h1>0x08 转义</h1><p>通过反斜线可以转义   </p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">\\</span>  </span><br><span class="line"><span class="string">\`</span>  </span><br><span class="line"><span class="string">\*</span>  </span><br><span class="line"><span class="string">\_</span>  </span><br><span class="line"><span class="string">\&#123;</span>  </span><br><span class="line"><span class="string">\[</span>  </span><br><span class="line"><span class="string">\(</span>  </span><br><span class="line"><span class="string">\#</span>  </span><br><span class="line"><span class="string">\+</span>  </span><br><span class="line"><span class="string">\-</span>  </span><br><span class="line"><span class="string">\.</span>  </span><br><span class="line"><span class="string">\!</span></span><br></pre></td></tr></table></figure><p>\<br>`<br>*<br>_<br>{<br>[<br>(<br>#<br>+<br>-<br>.<br>!  </p><div id="0x09-zhu-shi"></div> <br><br><br><h1>0x09 注释</h1><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 用原生的html注释吧，不要偷懒 --&gt;</span></span><br></pre></td></tr></table></figure><!-- 用原生的html注释吧，不要偷懒 --><div id="0x0a-biao-ge"></div> <br><br><br><h1>0x0A 表格</h1><p>第二行可以控制居中位置 </p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">| Tables        |</span> Are           <span class="params">| Cool  |</span></span><br><span class="line"><span class="params">| -------------|</span><span class="symbol">:-------------</span><span class="symbol">:|</span> -----<span class="symbol">:|</span></span><br><span class="line"><span class="params">| col 3 is      |</span> right-aligned <span class="params">| $1600 |</span></span><br><span class="line"><span class="params">| col 2 is      |</span> centered      <span class="params">|   $12 |</span></span><br><span class="line"><span class="params">| zebra stripes |</span> are neat      <span class="params">|    $1 |</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>Tables</th><th align="center">Are</th><th align="right">Cool</th></tr></thead><tbody><tr><td>col 3 is</td><td align="center">right-aligned</td><td align="right">$1600</td></tr><tr><td>col 2 is</td><td align="center">centered</td><td align="right">$12</td></tr><tr><td>zebra stripes</td><td align="center">are neat</td><td align="right">$1</td></tr></tbody></table><div id="0x0b-kong-ge"></div> <br><br><br><h1>0x0B 空格</h1><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">半方大的空白<span class="variable">&amp;ensp</span>;或&amp;<span class="meta">#8194;XXXXX</span></span><br><span class="line">全方大的空白<span class="variable">&amp;emsp</span>;或&amp;<span class="meta">#8195;XXXXX</span></span><br><span class="line">不断行的空白格<span class="variable">&amp;nbsp</span>;或&amp;<span class="meta">#160;XXXXX</span></span><br><span class="line"><span class="variable">&amp;emsp</span>;<span class="variable">&amp;emsp</span>;段落从此开始。</span><br></pre></td></tr></table></figure><p>半方大的空白&ensp;或&#8194;XXXXX<br>全方大的空白&emsp;或&#8195;XXXXX<br>不断行的空白格&nbsp;或&#160;XXXXX<br>&emsp;&emsp;段落从此开始。</p><div id="0x0c-zi-ti"></div> <br><br><br><h1>0x0C 字体</h1><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;font <span class="attribute">face</span>=<span class="string">"黑体"</span>&gt;我是黑体字&lt;/font&gt;</span><br><span class="line">&lt;font <span class="attribute">face</span>=<span class="string">"微软雅黑"</span>&gt;我是微软雅黑&lt;/font&gt;</span><br><span class="line">&lt;font <span class="attribute">face</span>=<span class="string">"STCAIYUN"</span>&gt;我是华文彩云&lt;/font&gt;</span><br><span class="line">&lt;font <span class="attribute">color</span>=#0099ff <span class="attribute">size</span>=12 <span class="attribute">face</span>=<span class="string">"黑体"</span>&gt;黑体&lt;/font&gt;</span><br><span class="line">&lt;font <span class="attribute">color</span>=#00ffff <span class="attribute">size</span>=3&gt;null&lt;/font&gt;</span><br><span class="line">&lt;font <span class="attribute">color</span>=gray <span class="attribute">size</span>=5&gt;gray&lt;/font&gt;</span><br></pre></td></tr></table></figure><p><font face="黑体">我是黑体字</font><br><font face="微软雅黑">我是微软雅黑</font><br><font face="STCAIYUN">我是华文彩云</font><br><font color="#0099ff" size="12" face="黑体">黑体</font><br><font color="#00ffff" size="3">null</font><br><font color="gray" size="5">gray</font></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input id=&quot;toc-toggle&quot; type=&quot;checkbox&quot;&gt;

&lt;!-- toc --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href
      
    
    </summary>
    
      <category term="编程开发" scheme="demonxian3.github.io/categories/%E7%BC%96%E7%A8%8B%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="语言" scheme="demonxian3.github.io/tags/%E8%AF%AD%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>做自己的博客</title>
    <link href="demonxian3.github.io/2018/08/23/18082301_hello/"/>
    <id>demonxian3.github.io/2018/08/23/18082301_hello/</id>
    <published>2018-08-23T13:54:16.000Z</published>
    <updated>2019-06-16T17:08:26.000Z</updated>
    
    <content type="html"><![CDATA[<style>.red{    color: red;}.ok{opacity:0.5;}</style><div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><ul><li><a href="#bo-ke-ban-jia-liao">博客搬家了</a></li></ul><!-- tocstop --></div># 博客搬家了2016年开始在博客园上面写博客，写博客其实有很多好处：<ol><li>整理庞大的知识体系</li><li>可以当作笔记日后参考</li><li>组织语言会重新对知识点思考</li><li>有访问量了就可以挂广告赚钱</li></ol><p>博客建站采用 Hexo(nodejs开发)，主题选用skapp</p><p>主题作者使用结巴分词，环境特别难装，估计很多人再安装的时候够呛，当然我也好不到哪里去，有一次把样式折腾坏怎么弄也弄不回来，一发脾气直接不搞博客。</p><p>过了差不多半年，又把吐掉的东西捡了回来，只不过这回心比较冷静。开始对skapp主题代码进行研究，尝试去理解很多没接触过的东西，比如scss和swig，读着读着发现代码超级简洁，渐渐的也知道如何二次开发，加上了Markdown TOC，调整了banner图，当然还有很多地方没有研究透。</p><p>为了避免网站被黑或者崩了，将部署好的环境和博客代码一起打包扔进 docker容器，然后存在私人hub上面，下次走到哪里都可以快速恢复起来，也是比较美滋滋的。</p><p>最后希望以后不要浮躁，心静下来，用后面十年的时光去沉淀一件事情。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;style&gt;
.red{
    color: red;
}

.ok{
opacity:0.5;
}
&lt;/style&gt;

&lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input i
      
    
    </summary>
    
      <category term="系统安装" scheme="demonxian3.github.io/categories/%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/"/>
    
    
      <category term="linux" scheme="demonxian3.github.io/tags/linux/"/>
    
      <category term="语言" scheme="demonxian3.github.io/tags/%E8%AF%AD%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>Web技术也能写App？</title>
    <link href="demonxian3.github.io/2018/08/22/18082201_webapp/"/>
    <id>demonxian3.github.io/2018/08/22/18082201_webapp/</id>
    <published>2018-08-22T23:24:22.000Z</published>
    <updated>2019-06-19T02:46:29.451Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><ul><li><a href="#0x00-kuang-jia-huan-jing-jie-shao">0x00 框架环境介绍</a></li><li><a href="#0x01-an-zhuang-ionic-he-cordova">0x01 安装 Ionic和 Cordova</a></li><li><a href="#0x02-chuang-jian-di-yi-ge-xiang-mu">0x02 创建第一个项目</a></li><li><a href="#0x03-an-zhuang-java-huan-jing">0x03 安装java环境</a></li><li><a href="#0x04-an-zhuang-android-studio-ide">0x04 安装 Android Studio IDE</a></li><li><a href="#0x05-shen-ru-yi-bu">0x05 深入一步</a></li></ul><!-- tocstop --></div><p>听说会写web的人也能写APP, 抱着尝试的心态踏上路体验一番 <a href="http://www.ionic.wang/start-index.html" target="_blank" rel="noopener">Ionic快速入门</a></p><div id="0x00-kuang-jia-huan-jing-jie-shao"></div> <br><br><br><h3>0x00 框架环境介绍</h3><hr><div id="shi-me-shi-ionic"></div> <h4>什么是 Ionic?</h4><p><a href="https://ionicframework.com/docs/" target="_blank" rel="noopener">Ionic</a> </p><blockquote><p>Ionic (ionicframework) 一款开源的Html5移动App开发框架, 是AngularJS移动端解决方案</p><p>Ionic 以流行的跨平台移动app开发框架 phoengap 为蓝本，让开发者可以通过命令行工具快速生成 android ios 移动app应用</p></blockquote><div id="shi-me-shi-phonegap"></div> <h4>什么是 Phonegap?</h4><p><a href="https://phonegap.com/" target="_blank" rel="noopener">Phonegap</a></p><blockquote><p>Phonegap 是一个用基于HTML，CSS和JavaScript的，创建移动跨平台移动应用程序的快速开发平台。</p><p>它使开发者能够利用 iPhone，Android，Palm，Symbian, WP7, WP8, Bada 和 Blackberry</p><p>智能手机的核心功能——包括地理定位，加速器，联系人，声音和振动</p></blockquote><div id="shi-me-shi-cordova"></div> <h4>什么是 Cordova?</h4><p><a href="http://cordova.axuer.com/" target="_blank" rel="noopener">Cordova</a></p><blockquote><p>Cordova 包装你的 Html 到原生 app 容器中，可以做到一次编写到处运行各个平台（android、ios、wp、bb、firefoxos、web 等）</p><p>这些功能通过统一的 JavaScript API提供，让你轻松的编写一组代码运行在几乎市面上的所有手机和平板上，</p><p>并可以发布到相应的 app 商城中。手上只有 android 手机，下面针对 android 来弄</p></blockquote><div id="tong-su-de-jiang"></div> <h4> 通俗的讲 </h4><p>ionic是一款基于 <code>AngularJs</code> 的 H5 移动 app 开发框架 而 <code>Cordova</code> / <code>Phonegap</code> 可以将代码打包成apk文件</p><p>本文使用的是 <code>Cordova</code> 打包工具进行打包，下面开始环境部署吧</p><div id="0x01-an-zhuang-ionic-he-cordova"></div> <br><br><br><h3>0x01 安装 Ionic和 Cordova</h3><p><code>Cordova</code> 和 <code>Ionic</code> 的命令行运行在 <code>Node.js</code> 上面并且可以通过 <code>NPM</code> 安装，因此我们需要先安装一下 <code>NodeJs</code> 环境: <a href="https://nodejs.org/" target="_blank" rel="noopener">安装地址</a></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/nodejs.png" alt>   </p><p>下图最好四个全都选上</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/nodejsSetup1.png" alt></p><p>安装好后，进入cmd测试一下是否安装成功</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">C:\<span class="title">Users</span>\<span class="title">yjc</span>&gt;<span class="title">node</span> -<span class="title">v</span></span></span><br><span class="line"><span class="function"><span class="title">v8</span>.11.4</span></span><br><span class="line"><span class="function"><span class="title">C</span>:\<span class="title">Users</span>\<span class="title">yjc</span>&gt;<span class="title">npm</span> -<span class="title">v</span></span></span><br><span class="line"><span class="function">5.6.0</span></span><br></pre></td></tr></table></figure><p>接着使用 npm 安装ionic 和 cordova   </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cordova ionic</span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/dos1.png" alt></p><div id="0x02-chuang-jian-di-yi-ge-xiang-mu"></div> <br><br><br><h3>0x02 创建第一个项目</h3><hr><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ionic <span class="literal">start</span> myApp tabs</span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/shell1.png" alt></p><p>下面三个是官方给的模板</p><blockquote><p>$ ionic start myApp blank         #下方第一张图<br>$ ionic start myApp tabs          #下方第二张图， 本次测试创建<br>$ ionic start myApp sidemenu      #下方第三张图</p></blockquote><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/demo.png" alt></p><p>接着，运行项目</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> myApp</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ionic serve</span></span><br></pre></td></tr></table></figure><p>运行成功后会打开<code>8100</code>端口服务，并自动弹出浏览器访问该服务</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/shell2.png" alt><br><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/firefox1.png" alt></p><p>然后将代码打包成andriod平台</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ionic build</span><br><span class="line">$ ionic cordova platform <span class="keyword">add</span><span class="bash"> android</span></span><br><span class="line">$ ionic cordova <span class="keyword">run</span><span class="bash"> android</span></span><br></pre></td></tr></table></figure><p>当运行到 <code>ionic cordova run android</code> 命令的时候，报出一个错误    </p><blockquote><p><font color="red">(node:129252) UnhandledPromiseRejectionWarning: CordovaError: Failed to find ‘ANDROID_HOME’ environment variable. Try setting it manually.<br>Failed to find ‘android’ command in your ‘PATH’. Try update your ‘PATH’ to include path to valid SDK directory. </font></p></blockquote><p>通过字面意思是缺少一个环境变量 <code>ANDROID_HOME</code>， 后面去查资料发现仅仅安装 <code>nodejs</code> 和 <code>ionic</code> 是不够的，</p><p>还需要安装 <code>Android Studio</code> 及 <code>Java</code>环境。毕竟不管怎样最终的APP生成，都需要依赖<code>Andriod SDK</code> 以及相关编译工具  </p><div id="0x03-an-zhuang-java-huan-jing"></div> <br><br><br><h3>0x03 安装java环境</h3><hr><p>java环境安装的是 <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">jdk8</a></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/firefox2.png" alt></p><p>这里也是全都选上</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install1.png" alt></p><p>然后添加环境变量 <code>JAVA_HOME</code> , value就是jdk安装的位置</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/var1.png" alt></p><p>设置完成后，在命令行里测试一下，输入<code>Java</code>弹出用法就没错了</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/dos2.png" alt></p><div id="0x04-an-zhuang-android-studio-ide"></div> <br><br><br><h3>0x04 安装 Android Studio IDE</h3><hr><p>这货是Google出的，需要FQ，不过国内也有不少开发者做了镜像，其实关于FQ没有什么敏感不敏感的 只要不要给国家捣乱，</p><p>好好学习，国家还是会支持的, Github就是一个例子。官网： <a href="http://android.com" target="_blank" rel="noopener">Android Studio</a>, 若没办法FQ，推荐 <a href="http://www.androiddevtools.cn/" target="_blank" rel="noopener">国内镜像</a>，里头工具很齐全。</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/firefox3.png" alt></p><p>这里我下载的是第一个64位的，有一点需要说明一下， 下载的Android Studio IDE 里头是包含了以下</p><table><thead><tr><th>name</th><th>function</th></tr></thead><tbody><tr><td>SDK Tools</td><td>(有sdkmanger adb等等)</td></tr><tr><td>SDK Platform-Tools</td><td>(不同安卓版本的管理工具)</td></tr><tr><td>Build-Tools</td><td>(编译工具)</td></tr><tr><td>SDK</td><td>(默认是8.+的版本，但是cordova 用的是8.0的，后面报错我们需要改一下版本)</td></tr><tr><td>SDK System images</td><td>(模拟器镜像，虚拟机AVD创建需要用到，在PC上模拟app运行)</td></tr></tbody></table><br><font color="red"> 所以说安装一个IDE就够了，其他不用装 !!!</font><p>下载完成后解压是免安装的，基本文件如下图,  主程序在bin目录下面，此时还没有SDK， Gradle是一个基于Apache Ant和Apache Maven</p><p>概念的项目自动化构建开源工具。它使用一种基于Groovy的特定领域语言(DSL)来声明项目设置，抛弃了基于XML的各种繁琐配置。</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/folder1.png" alt></p><p>进入bin目录下面运行 studio64.exe 首先弹出是否导入设置，默认不导入即可，点下一步IDE就会开始下载SDK</p><p>这里会弹出代理设置，点击取消不设置代理也是能够继续下载和安装的，因为我相信好好学习，国家还会帮你加速的</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install2.png" alt></p><p>之后这里点击自定义custom，把sdk默认安装路径更改一下，不改的话默认使用 Appdata 目录有点烦人</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install3.png" alt></p><p>选主题，夜猫子嘿嘿</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install4.png" alt></p><p>下图比较关键，这里勾选AVD安卓虚拟机，当然忘记勾后面也可以在IDE里头安装，下面路径则是要安装的SDK目录</p><p>这个目录不能和Android Studio IDE 同个目录。新建一个空目录就行。</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install5.png" alt></p><p>下面设置虚拟机分配内存空间大小RAM的 ，默认即可</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install6.png" alt></p><p>点击确认，人品好的话，国家不会断你的网，然后可以像运维人员那样喝杯咖啡，抽个烟啥的慢慢等待</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install7.png" alt></p><p>喝完咖啡回来看看，如果出现下面界面，那么恭喜你人品还不错，因为sdk全是 dl.google.com 里下载的。</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/buchong1.png" alt></p><p>接着在主界面点configure ,选择sdkmanager， 查看SDK是否ok</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/studio1.png" alt></p><p>这里默认装的是最新的SDK，Android 8.+ Level28 的SDK</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/studio2.png" alt></p><p>也可以到我们安装的目录里头看看</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/folder2.png" alt></p><table><thead><tr><th>folder name</th><th>function</th></tr></thead><tbody><tr><td>platforms</td><td>存放下载的不同版本的Android SDK</td></tr><tr><td>build-tools</td><td>存放编译用的工具</td></tr><tr><td>emulator</td><td>存放虚拟机相关工具</td></tr><tr><td>system-images</td><td>存放虚拟机镜像</td></tr><tr><td>skins</td><td>存放主题</td></tr><tr><td>platform-tools</td><td>开发辅助工具，如adb sqlite3</td></tr><tr><td>sources</td><td>SDK 源码</td></tr><tr><td>tools</td><td>里面<code>bin</code>文件存放 <code>avdmanager</code> 和 <code>sdkmanager</code>工具，在IDE里会调用</td></tr></tbody></table><br><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/folder3.png" alt></p><p>到这里做了这么多，其实就为了一个环境变量 <code>ANDROID_HOME</code>，现在有了SDK就可以设置该变量了</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/var2.png" alt></p><p>好了之后，退出终端，重新开个command prompt 执行 <code>ionic cordova run android</code></p><div id="0x05-shen-ru-yi-bu"></div> <br><br><br><h3>0x05 深入一步</h3><hr><p>初来乍到，遇到各种各样问题是很正常的，不要怕报错，解决错误的方法也很简单，阅读错误提示信息，在查询</p><p>相关信息尝试即可， 上面配置好<code>ANDROID_HOME</code>之后，重新运行 ionic cordova run android 提示新的错误</p><blockquote><p><font color="red">(node:110872) UnhandledPromiseRejectionWarning: CordovaError: Could not find an installed version of Gradle either in Android Studio,<br>or on your system to install the gradle wrapper. Please include gradle in your path, or install Android Studio </font></p></blockquote><p>翻译一下字面意思，大概是找不到 grandle 这个东西，如果有的话需要将其加入到环境变量path里头。在上面介绍Android Studio IDE目录结构</p><p>的时候有提到Gradle，没错就是那玩意，我们在环境变量指明一下Gradle的位置即可，因为<code>ANDROID_HOME</code>变量只说了SDK位置，IDE的位置</p><p>信息还没上报给系统环境。我的gradle在这里，把他添加到用户环境变量中</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/folder4.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/var3.png" alt></p><p>然后把终端关了重新运行。不重启的话，终端不会动态更新环境变量。下面Git测试一下</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/shell3.png" alt></p><p>可以之后重新运行<code>ionic cordova run android</code></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/shell4.png" alt></p><p>结果指明了gradle给他，人家不用，自己又跑去下载低点的版本，为何不一开始就去下载。。。</p><p>之后耐心等待他把编译需要的依赖包全部下载完成。。。</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/shell5.png" alt></p><p>下载完成后，又有一个新的错误。</p><blockquote><font color="red">File C:\Users\yjc\.android\repositories.cfg could not be loaded.  Checking the license for package Android SDK Platform 26 in F:\Android\SDK\licensesWarning: License for package Android SDK Platform 26 not accepted.<p>FAILURE: Build failed with an exception.</p><p>* What went wrong:<br>A problem occurred configuring project ‘:CordovaLib’.<br><font color="blue"><br>&gt; You have not accepted the license agreements of the following SDK components:<br>  [Android SDK Platform 26].<br>  Before building your project, you need to accept the license agreements and complete the installation of the missing components using the Android Studio SDK Manager.<br>  Alternatively, to learn how to transfer the license agreements from one workstation to another, go to <a href="http://d.android.com/r/studio-ui/export-licenses.html" target="_blank" rel="noopener">http://d.android.com/r/studio-ui/export-licenses.html</a><br></font><br>* Try:<br>Run with –stacktrace option to get the stack trace. Run with –info or –debug option to get more log output.</p><p>* Get more help at <a href="https://help.gradle.org" target="_blank" rel="noopener">https://help.gradle.org</a><br></p></font><p></p></blockquote><p>重点是蓝字部分，想了半天才想到 IDE 默认安装的SDK版本是 <code>SDK Level 28</code> 的， 而这里<code>Cordova</code>需要用到 <code>SDK Level 26</code>   </p><p>我们还没有安装26的版本，因此报错了， 进入<code>SDKManager</code>安装一下 <code>SDK level 26</code>的版本<br><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/studio3.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/studio4.png" alt></p><p><a href="https://developer.android.com/studio/releases/platforms" target="_blank" rel="noopener">该网站(需要FQ)</a> 可查看<code>安卓版本</code>和<code>API level</code>等级的关系，SDKmanager也能看到, 重新运行命令 <code>ionic cordova run android</code> (好像已经敲第4遍了)， </p><p>不要心累 排错就像破案，通过线索和分析，一步一步把案情弄明白，放点音乐放松下, 话刚说完又来个错误，但至少编译成功, 就是模拟器运行不了</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/studio5.png" alt></p><blockquote><p><font color="red"> &gt; BUILD SUCCESSFUL in 38s<br>46 actionable tasks: 46 executed<br>Built the following apk(s):<br><font color="blue"><br>        C:\Users\yjc\Desktop\myApp\platforms\android\app\build\outputs\apk\debug\app-debug.apk<br></font><br>ANDROID_HOME=F:\Android\SDK<br>JAVA_HOME=C:\Java<br>No target specified and no devices found, deploying to emulator<br>(node:112612) UnhandledPromiseRejectionWarning: TypeError: Cannot read property ‘semver’ of null &gt; </font></p></blockquote><p>编译好的apk文件在蓝字路径，若不想用电脑的模拟器运行，可无视这个错误，手机连上PC，进入编译好的位置下运行命令，就能在手机安装app测试了   </p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb <span class="keyword">install </span>app-<span class="built_in">debug</span>.apk</span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/phone1.png" alt> &nbsp;&nbsp; <img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/phone2.png" alt></p><p>上图是手机测试结果, 但是以后频繁的更改代码测试的时候，总不可能老是到手机上安装测试 要像web开发一样，改好代码，</p><p>切换浏览器F5立刻显示效果。 所以虚拟机模拟器问题还是需要解决 参考 <a href="https://stackoverflow.com/questions/47018914/cordova-android-emulation-error-cannot-read-property-semver-of-null" target="_blank" rel="noopener">stackoverflow</a> ，大概原因是emulator版本的问题，</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/overflow1.png" alt></p><p>这里进入 <code>SDKManager</code> 把最新的sdk 8.+删除， 点击Apply应用一下</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/studio6.png" alt></p><p>删除成功后重新运行一下命令.这次虽然没有报错了，但是卡在这个地方不动，提示说请定义<code>ANDROID_STUDIO_ROOT</code></p><blockquote><p>:app:assembleDebug UP-TO-DATE<br>:app:cdvBuildDebug UP-TO-DATE</p><p>BUILD SUCCESSFUL in 2s<br>46 actionable tasks: 1 executed, 45 up-to-date<br>Built the following apk(s):<br>        C:\Users\yjc\Desktop\myApp\platforms\android\app\build\outputs\apk\debug\app-debug.apk<br>ANDROID_HOME=F:\Android\SDK<br>JAVA_HOME=C:\Java<br>No target specified and no devices found, deploying to emulator<br>No emulator specified, defaulting to Nexus_5X_API_28_x86<br>Waiting for emulator to start…<br>PANIC: Cannot find AVD system path. Please define <font color="red">ANDROID_SDK_ROOT</font></p></blockquote><p>下面是参考 <a href="https://stackoverflow.com/questions/41274830/panic-cannot-find-avd-system-path-please-define-android-sdk-root" target="_blank" rel="noopener">stackoverflow</a> 解决步骤操作，删除旧的AVD，并创建新的AVD</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/studio7.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/studio8.png" alt></p><p>这里选择并下载系统镜像</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/studio9.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/studio10.png" alt></p><p>模拟器运行测试一下。先不要关掉，放在一边</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/phone3.png" alt></p><p>接着在重新运行一下命令 <code>ionic cordova run android</code> (敲了第n遍了，这官网留下那么多坑啊)，</p><p>终于看到成功的界面，并且模拟器也及时的弹出了Ionic demo app程序</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/shell6.png" alt>   <img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/phone4.png" alt></p><p>web安卓之路也算是上道了，踩坑无数，苦尽甘来，后面只需要在下图的位置，编写HTML代码就可以生产APP啦，是不是很美滋滋啊   </p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/folder5.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input id=&quot;toc-toggle&quot; type=&quot;checkbox&quot;&gt;

&lt;!-- toc --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href
      
    
    </summary>
    
      <category term="编程开发" scheme="demonxian3.github.io/categories/%E7%BC%96%E7%A8%8B%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="安卓" scheme="demonxian3.github.io/tags/%E5%AE%89%E5%8D%93/"/>
    
  </entry>
  
  <entry>
    <title>Manjaro-deepin 开箱体验</title>
    <link href="demonxian3.github.io/2018/07/03/18070301_manjaro/"/>
    <id>demonxian3.github.io/2018/07/03/18070301_manjaro/</id>
    <published>2018-07-03T19:56:23.000Z</published>
    <updated>2019-06-17T00:29:35.000Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><ul><li><a href="#0x00-yu-lan">0x00 预览</a></li><li><a href="#0x01-yin-yan">0x01 引言</a></li><li><a href="#0x02-zhun-bei">0x02 准备</a></li><li><a href="#0x03-an-zhuang">0x03 安装</a></li><li><a href="#0x04-pei-zhi">0x04 配置</a></li><li><a href="#0x05-ruan-jian">0x05 软件</a></li><li><a href="#0x06-zui-hou">0x06 最后</a></li></ul><!-- tocstop --></div><div id="0x00-yu-lan"></div> <br><br><br><h1>0x00 预览</h1><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/manjaro1.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/manjaro2.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/manjaro3.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/manjaro4.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/manjaro5.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/manjaro6.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/manjaro7.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/manjaro8.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/manjaro9.png" alt></p><div id="0x01-yin-yan"></div> <br><br><br><h1>0x01 引言</h1><blockquote><p><font color="red">在windows系统中, 想做linux系统的一些事情时, 如:</font><br>想用 vim 编辑器时, IDE上有专门的插件<br>想用 ssh 连服务器时, 有 putty ,  xshell ,  secureCRT 等客户端软件, 尽管不像 telnet 是系统自带命令<br>想搭建一些 http vnc ftp 服务时, 有 phpstudy ,  xampp ,  appserv 等服务端软件。<br>不管怎样, windows下总有办法解决。<br>但每次换一台windows系统，就要把上面的软件重新安装一遍 ( 特别是在校生，机房电脑每天重置 )<br><font color="red">那么能否在windows下安装linux shell环境，并附带各种环境和软件?</font><br>方法一: 做个linux虚拟机, 这样的话估计虚拟机安装的时间，早就安装好需要用的相关软件了，时间长。<br>方法二: 使用 <code>Git Bash</code> , 这玩意没有表面上简单的提交代码简单，她其实包含整个bash shell, 什么 ssh vim ps等命令都有。</p></blockquote><p><a href="https://git-scm.com/" target="_blank" rel="noopener">Git Bash</a></p><p><img src="git.png" alt></p><blockquote><p><font color="red">那么既然经常需要在linux环境下工作，为何不直接真机装个 linux 系统? </font><br>linux 桌面市场一直比不过 windows 也是有原因的:</p><ol><li>国内大部分人用的是 <code>mircrosoft office</code>， 而不是 linux 的 <code>open office</code></li><li>学校机房，图书馆，银行， 大部分电脑也装的是windows， 有的还是XP</li><li>QQ Tim 微信 迅雷 网盘 难道要告别了吗</li><li>linux 安装很多服务，至少我需要参考教程才能搭建安装好。windows 一路点下一步就好了</li><li>linux 安装软件，没有源就源码编译( ./configure &amp;&amp; make &amp;&amp; make install ) 时间慢，易报错，难清理</li><li>物理机装 linux, 哪天不小心 <code>rm -rf /</code>, 就没有快照恢复了， 磁盘恢复命令都救不了。 卸下硬盘找人恢复吧 </li></ol></blockquote><p>既想使用 linux 系统， 又无法接受 linux 的 “特性”， 内心凌乱的就像 <a href="http://tool.uixsj.cn/hack-html5/" target="_blank" rel="noopener">黑客雨</a>, 最后无奈放弃真机安装的念头。</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/hack.png" alt></p><p>最近，在公众号看到比较火的事情: deepin 创始人离职, 顺便了解 deepin 作为一个 linux 桌面系统， 口碑上还是不错的。</p><p>进到 <a href="https://www.deepin.org/" target="_blank" rel="noopener">deepin社区</a> 简单逛逛，发现一张 linux 国际排名图，看的我大吃一惊: 排名居然第5，远超 centos，这完全颠覆了红旗给我的印象</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/rank1.png" alt></p><p>由于图片数据是 2017 年的， 好奇的我看看今年的数据: <a href="https://distrowatch.com/dwres.php?resource=popularity" target="_blank" rel="noopener">linux发行系统排行</a></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/rank2.png" alt></p><p>很可惜的是今年的 deepin 跌了好多，因为离职的缘故 ??? 不过我遇到了一个强大的系统，排名第一的 <a href="https://manjaro.org/" target="_blank" rel="noopener">Manjaro</a></p><p>也就有了本篇开箱教程。 关于 manjaro 这里有 <a href="https://www.manjaro.cn/category/download-manjaro" target="_blank" rel="noopener">清华镜像站</a> 可以简单了解一下, 先别着急下载镜像</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install1.png" alt></p><p>这里我体验了一下 Gnome 和 KDE 的 manjaro 感觉还行，yaourt 和 pacman 强大的包管理里涵盖了很多软件包， 基本不需要再用源码安装了。</p><p>系统本身是魔改的Arch， 但不像 Arch 那么折腾人， 有图形界面版的软件包管理器，内含 WPS(解决了 Microsoft office问题) ，还有FQ软件:SS</p><p>虽然 QQ 和 Tim 可以安装(依赖于 wine 环境) ， 但无法正常运行起来，查资料发现一个解决方案:</p><p>.<font color="red">使用 deepin 桌面环境的 manjaro 系统可以完美运行QQ 和 Tim </font>   </p><p>开篇9张开胃图就是 manjaro-deepin 了</p><div id="0x02-zhun-bei"></div> <br><br><br><h1>0x02 准备</h1><p>下载 <a href="https://sourceforge.net/projects/manjarolinux-community/files/archive/deepin/17.1.7/manjaro-deepin-17.1.7-stable-x86_64.iso/download" target="_blank" rel="noopener">manjaro-deepin镜像</a></p><p>如果是要真机安装，下载<a href="https://sourceforge.net/projects/usbwriter/" target="_blank" rel="noopener">usbwriter</a>，虚拟机跳过此步</p><p>准备工作做好后，插入U盘打开 usbwriter , 将 manjaro 镜像文件写入 U 盘， 操作很简单</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/usb.png" alt></p><p>虚拟机则是创建虚拟机， 并且挂载 manjaro 光盘，启动即可。</p><div id="0x03-an-zhuang"></div> <br><br><br><h1>0x03 安装</h1><p> manjaro 的三个版本 kde  gnome xfce安装方式都是一样的， 开箱即用， deepin桌面系统也是一样的安装方式</p><p> 上面能将manjaro引导起来, 后面的安装步骤和安装KDE版桌面环境manjaro系统步骤一样，下面是安装教程</p><p> 引导成功后，能看到下面这个界面</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install2.png" alt></p><p>时区选择Asia/Shanghai,  键盘格局不用设置，语言选择中文</p><p>driver是选择驱动的意思，可以选择专属和开源</p><blockquote><p>官方手册上说，如果你不知道怎么选择驱动，默认free就可以， nonfree适合那些比较新的显卡， free比较适合旧版的显卡</p><p>我的推荐： 真机推荐nonfree， 虚拟机推荐free</p></blockquote><p>配置好上面后，选择 <code>Boot: Manjaro.....</code> 这个选项，不要选reboot 和其他的</p><p>系统起来后，如下图，这只是live界面，系统还没有开始安装</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install3.png" alt></p><p>桌面上面有两个程序，第一个Install Manjar是安装系统的主程序，第二个是英文版安装手册，英语好的可以阅读一下</p><p>双击左上角install manjaro程序开始安装系统  ，或者在欢迎界面选择 <code>lauch at start</code></p><ol><li>语言选择chinese</li></ol><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install4.png" alt></p><ol start="2"><li>地区选择上海</li></ol><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install5.png" alt>   </p><ol start="3"><li>键盘默认</li></ol><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install6.png" alt>  </p><ol start="4"><li>分区这里比较关键，选择手动</li></ol><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install7.png" alt></p><p>这里可以识别存储器，先选好存储器，我这里是Nvme的500g固态， 因为预装了 win10 所以下图可以看到有NTFS文件系统</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install8.png" alt></p><p>还有一块 1T 的机械盘，暂时还没有系统，若想装双系统，可以直接安装，因为 grub 是可以和 WBM (Windows Boot Mangaer)共存的   </p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/install9.png" alt></p><p>下面是我的分区</p><table><thead><tr><th>分区大小</th><th>挂载点</th><th>文件系统</th><th>标记</th></tr></thead><tbody><tr><td>600MB</td><td>/boot</td><td>ext4</td><td>boot</td></tr><tr><td>2000MB</td><td>linuxswap</td><td>linuxswap</td><td>swap</td></tr><tr><td>剩余</td><td>/</td><td>ext4</td><td>无</td></tr></tbody></table><br>![](https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/installa.png)<p>分区分好后，剩下的就是用户设置和耐心等待了</p><div id="0x04-pei-zhi"></div> <br><br><br><h1>0x04 配置</h1><p> 安装后，重启，界面是这样的</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/installb.png" alt></p><p>当然QQ 不是自带的，不过一条命令即可搞定</p><p>打开linux终端，跟着下面配置做即可安装ss, tim, qq, chrome, 网易云，迅雷, WPS等等</p><ol><li>切换中国源</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit <span class="regexp">/etc/</span>pacman-mirrors.conf</span><br><span class="line"><span class="comment">#若提示无gedit , 执行: sudo pacman -S gedit 或者干脆直接nano 编辑，默认是有的</span></span><br></pre></td></tr></table></figure><p>修改如下地方为中国：</p><blockquote><p>OnlyCountry = China</p></blockquote><ol start="2"><li>增加archlinuxcn软件仓库以及各种开发工具源</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit <span class="regexp">/etc/</span>pacman.conf</span><br></pre></td></tr></table></figure><p>添加以下内容</p><blockquote><p>[archlinuxcn]<br>SigLevel = Optional TrustedOnly<br>Server = <a href="http://mirrors.ustc.edu.cn/archlinuxcn/$arch" target="_blank" rel="noopener">http://mirrors.ustc.edu.cn/archlinuxcn/$arch</a></p><p>[arch4edu]<br>SigLevel = Never<br>Server = <a href="http://mirrors.tuna.tsinghua.edu.cn/arch4edu/$arch" target="_blank" rel="noopener">http://mirrors.tuna.tsinghua.edu.cn/arch4edu/$arch</a></p></blockquote><ol start="3"><li>更新并选择最快的源列表</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman-mirrors -g</span></span><br></pre></td></tr></table></figure><p>4.更新系统</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -Syyu</span></span><br></pre></td></tr></table></figure><p>5.安装archlinuxcn-keyring</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -S archlinuxcn-keyring</span></span><br></pre></td></tr></table></figure><p>如果上面安装失败,则执行以下命令:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -Syu haveged</span><br><span class="line">sudo systemctl <span class="keyword">start</span> haveged</span><br><span class="line">sudo systemctl <span class="keyword">enable</span> haveged</span><br><span class="line">sudo rm -rf /etc/pacman.d/gnupg</span><br><span class="line">sudo pacman-<span class="keyword">key</span> <span class="comment">--init</span></span><br><span class="line">sudo pacman-<span class="keyword">key</span> <span class="comment">--populate archlinux</span></span><br><span class="line">sudo pacman -S archlinuxcn-keyring</span><br><span class="line">sudo pacman-<span class="keyword">key</span> <span class="comment">--populate archlinuxcn</span></span><br></pre></td></tr></table></figure><p>6.安装yaourt</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -S yaourt</span></span><br></pre></td></tr></table></figure><p>7.安装搜狗输入法</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S fcitx-sogoupinyin</span><br><span class="line">sudo pacman -S fcitx-im</span><br><span class="line">sudo pacman -S fcitx-configtool</span><br><span class="line">sudo gedit ~/.xprofile</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">GTK_IM_MODULE</span>=fcitx</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">QT_IM_MODULE</span>=fcitx</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">XMODIFIERS</span>=<span class="string">"im=fcitx"</span></span><br></pre></td></tr></table></figure><p>8.安装配置git</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -S git</span></span><br></pre></td></tr></table></figure><blockquote><p>设置个人github信息：<br>git config –global user.name “github昵称”<br>git config –global user.email “注册邮箱”</p></blockquote><p>9.安装配置zsh</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S zsh zsh-completions</span><br><span class="line">cat <span class="regexp">/etc/</span>shells</span><br><span class="line">chsh -s <span class="regexp">/bin/</span>zsh</span><br><span class="line">sh -c <span class="string">"$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"</span></span><br></pre></td></tr></table></figure><div id="0x05-ruan-jian"></div> <br><br><br><h1>0x05 软件</h1><ol><li>安装Chrome</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -S google-chrome</span></span><br></pre></td></tr></table></figure><ol start="2"><li>安装QQ/TIM</li></ol><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yaourt -S deepin<span class="selector-class">.com</span><span class="selector-class">.qq</span><span class="selector-class">.im</span>     #QQ</span><br><span class="line">yaourt -S deepin<span class="selector-class">.com</span><span class="selector-class">.qq</span><span class="selector-class">.office</span> #Tim</span><br></pre></td></tr></table></figure><ol start="3"><li>安装搜狗输入法</li></ol><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yaourt -S fcitx-sogoupinyin</span><br><span class="line">sudo gedit ~<span class="string">/.xprofile</span></span><br></pre></td></tr></table></figure><p>添加：</p><blockquote><p>export GTK_IM_MODULE=fcitx<br>export QT_IM_MODULE=fcitx<br>export XMODIFIERS=”@im=fcitx”</p></blockquote><ol start="4"><li>安装wps</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -S wps-office</span></span><br><span class="line"><span class="attribute">sudo pacman -S ttf-wps-fonts</span></span><br></pre></td></tr></table></figure><ol start="5"><li>安装迅雷</li></ol><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yaourt -Sy deepin<span class="selector-class">.com</span><span class="selector-class">.thunderspeed</span></span><br></pre></td></tr></table></figure><ol start="6"><li>卸载libreoffice</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -Rs libreoffice-fresh</span></span><br></pre></td></tr></table></figure><ol start="7"><li>卸载Transmission</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -Rs transmission-gtk</span></span><br></pre></td></tr></table></figure><ol start="8"><li>卸载Evolution</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -Rs evolution</span></span><br></pre></td></tr></table></figure><ol start="9"><li>卸载Galculator</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -Rs galculator</span></span><br></pre></td></tr></table></figure><ol start="10"><li>卸载Brasero</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -Rs brasero</span></span><br></pre></td></tr></table></figure><ol start="11"><li>卸载HexChat</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -Rs hexchat</span></span><br></pre></td></tr></table></figure><ol start="12"><li>安装网易云音乐</li></ol><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -S netease-cloud-music</span></span><br></pre></td></tr></table></figure><ol start="13"><li>FQ软件安装</li></ol><blockquote><p>在图形界面的添加/删除搜那个Ss的全名关键字就有了，可以装QT5版本<br>如果浏览器想应用，还得装一下polipo端口转发</p></blockquote><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/soft.png" alt></p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sudo pacman -S polipo</span></span><br></pre></td></tr></table></figure><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/polipo/<span class="built_in">config</span></span><br></pre></td></tr></table></figure><blockquote><p>socksParentProxy = localhost:1080<br>proxyPort = 8192</p></blockquote><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="literal">start</span> polipo</span><br></pre></td></tr></table></figure><ol start="14"><li>安装网络工具</li></ol><p>默认是没有 netstat  和 ifconfig 命令的</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S <span class="built_in">net</span>-tools</span><br></pre></td></tr></table></figure><div id="0x06-zui-hou"></div> <br><br><br><h1>0x06 最后</h1><p>开箱体验到此就结束了，小伙伴们，快拿着这个manjaro 装逼神器发朋友圈装个逼吧。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input id=&quot;toc-toggle&quot; type=&quot;checkbox&quot;&gt;

&lt;!-- toc --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href
      
    
    </summary>
    
      <category term="系统安装" scheme="demonxian3.github.io/categories/%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/"/>
    
    
      <category term="linux" scheme="demonxian3.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Postfix 服务搭建</title>
    <link href="demonxian3.github.io/2018/05/12/18051201_postfix/"/>
    <id>demonxian3.github.io/2018/05/12/18051201_postfix/</id>
    <published>2018-05-12T02:14:59.000Z</published>
    <updated>2019-06-16T17:25:38.000Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><ul><li><a href="#0x00-huan-jing-shuo-ming">0x00 环境说明</a></li><li><a href="#0x01-qing-li-zi-dai-you-jian">0x01 清理自带邮件</a></li><li><a href="#0x02-an-zhuang-postfix-he-dovecot-ruan-jian">0x02 安装 postfix 和 dovecot 软件</a></li><li><a href="#0x03-pei-zhi-postfix">0x03. 配置postfix</a></li><li><a href="#0x04-qi-dong-postfix-fu-wu-cha-kan-jian-ting-duan-kou">0x04 启动postfix服务，查看监听端口</a></li><li><a href="#0x05-you-jian-gong-neng-ce-shi">0x05 邮件功能测试</a></li><li><a href="#0x06-pei-zhi-dovecot-bing-qi-dong-fu-wu">0x06 配置 dovecot 并启动服务</a></li></ul><!-- tocstop --></div># 0x00 环境说明> 搭建服务环境： Centos 6> 配置域名hosts： mail.demonC6.com<div id="0x01-qing-li-zi-dai-you-jian"></div> <br><br><br><h1>0x01 清理自带邮件</h1><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -<span class="keyword">qa</span> | <span class="keyword">grep</span> sendmail*</span><br><span class="line">rpm -<span class="keyword">e</span> sendmail* --nodeps</span><br></pre></td></tr></table></figure><div id="0x02-an-zhuang-postfix-he-dovecot-ruan-jian"></div> <br><br><br><h1>0x02 安装 postfix 和 dovecot 软件</h1><p>postfix 是发送邮件服务器，可以将邮件发送到该服务器上， 监听端口为 25(SMTP)</p><p>dovecot 是接受邮件服务器， 可以到服务器上取回自己的邮件， 监听端口是 110(pop3)</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> postfix*</span><br></pre></td></tr></table></figure><div id="0x03-pei-zhi-postfix"></div> <br><br><br><h1>0x03. 配置postfix</h1><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/<span class="built_in">postfix</span>/main.<span class="built_in">cf</span></span><br></pre></td></tr></table></figure><p><strong>需要修改的配置如下几项，红色表示需要开启， 蓝色表示需要注释关闭：</strong></p><ol><li>更改邮件主机名和域名</li></ol><blockquote><p> <font color="red">75 myhostname = mail.demonC6.com</font><br> 76 #myhostname = virtual.domain.tld<br> 77<br> 78 # The mydomain parameter specifies the local internet domain name.<br> 79 # The default is to use $myhostname minus the first component.<br> 80 # $mydomain is used as a default value for many other configuration<br> 81 # parameters.<br> 82 #<br> <font color="red">83 mydomain = demonC6.com</font></p></blockquote><ol start="2"><li>修改组织</li></ol><blockquote><p> 94 # For the sake of consistency between sender and recipient addresses,<br> 95 # myorigin also specifies the default domain name that is appended<br> 96 # to recipient addresses that have no @domain part.<br> 97 #<br> <font color="red">98 myorigin = $myhostname</font><br> <font color="red">99 myorigin = $mydomain</font></p></blockquote><ol start="3"><li>修改监听的地址</li></ol><blockquote><p><font color="red">113 inet_interfaces = all</font><br>114 #inet_interfaces = $myhostname<br>115 #inet_interfaces = $myhostname, localhost<br><font color="blue">116 #inet_interfaces = localhost</font></p></blockquote><ol start="4"><li>修改收件人</li></ol><blockquote><p><font color="red">164 mydestination = $myhostname,$mydomain</font><br>165 #mydestination = $myhostname, localhost.$mydomain, localhost, $mydomain<br>166 #mydestination = $myhostname, localhost.$mydomain, localhost, $mydomain,<br>167 #   mail.$mydomain, www.$mydomain, ftp.$mydomain</p></blockquote><p>5) 修改网卡所在的网段</p><blockquote><p><font color="red">264 mynetworks = 192.168.10.0/24, 127.0.0.0/8</font><br>265 #mynetworks = $config_directory/mynetworks<br>266 #mynetworks = hash:/etc/postfix/network_table</p></blockquote><p>6)  修改转发的邮件域名</p><blockquote><p><font color="red">296 relay_domains = $mydestination</font></p></blockquote><p>7)  修改postfix 邮件别名 （下面两项默认是开启的，不用动）</p><blockquote><p>385 #alias_maps = dbm:/etc/aliases<br><font color="red">386 alias_maps = hash:/etc/aliases</font><br>387 #alias_maps = hash:/etc/aliases, nis:mail.aliases<br>388 #alias_maps = netinfo:/aliases<br>389<br>390 # The alias_database parameter specifies the alias database(s) that<br>391 # are built with “newaliases” or “sendmail -bi”.  This is a separate<br>392 # configuration parameter, because alias_maps (see above) may specify<br>393 # tables that are not necessarily all under control by Postfix.<br>394 #<br>395 #alias_database = dbm:/etc/aliases<br>396 #alias_database = dbm:/etc/mail/aliases<br><font color="red">397 alias_database = hash:/etc/aliases</font><br>398 #alias_database = hash:/etc/aliases, hash:/opt/majordomo/aliases</p></blockquote><div id="0x04-qi-dong-postfix-fu-wu-cha-kan-jian-ting-duan-kou"></div> <br><br><br><h1>0x04 启动postfix服务，查看监听端口</h1><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service postfix start</span><br><span class="line">netstat -anptu <span class="string">| grep :22</span></span><br></pre></td></tr></table></figure><blockquote><p>tcp        0      0 0.0.0.0:22                  0.0.0.0:*                   LISTEN      2276/sshd<br>tcp        0     40 192.168.10.129:22           192.168.10.1:56933          ESTABLISHED 6350/sshd<br>tcp        0      0 :::22                       :::*                        LISTEN      2276/sshd</p></blockquote><div id="0x05-you-jian-gong-neng-ce-shi"></div> <br><br><br><h1>0x05 邮件功能测试</h1><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">echo</span>  hello man | mail root<span class="variable">@demonC6</span>.com</span><br><span class="line">mail</span><br></pre></td></tr></table></figure><blockquote><p>Heirloom Mail version 12.4 7/29/08.  Type ? for help.<br>“/var/spool/mail/root”: 1 message 1 new<br>&gt;N  1 root                  Sat May 12 11:37  17/543<br>&amp; 1<br>Message  1:<br>From <a href="mailto:root@demonC6.com" target="_blank" rel="noopener">root@demonC6.com</a>  Sat May 12 11:37:49 2018<br>Return-Path: <a href="mailto:&#x72;&#111;&#111;&#x74;&#x40;&#100;&#101;&#x6d;&#111;&#x6e;&#x43;&#x36;&#46;&#99;&#x6f;&#109;" target="_blank" rel="noopener">&#x72;&#111;&#111;&#x74;&#x40;&#100;&#101;&#x6d;&#111;&#x6e;&#x43;&#x36;&#46;&#99;&#x6f;&#109;</a><br>X-Original-To: <a href="mailto:root@demonC6.com" target="_blank" rel="noopener">root@demonC6.com</a><br>Delivered-To: <a href="mailto:root@demonC6.com" target="_blank" rel="noopener">root@demonC6.com</a><br>Date: Sat, 12 May 2018 11:37:49 +0800<br>To: <a href="mailto:root@demonC6.com" target="_blank" rel="noopener">root@demonC6.com</a><br>User-Agent: Heirloom mailx 12.4 7/29/08<br>Content-Type: text/plain; charset=us-ascii<br>From: <a href="mailto:root@demonC6.com" target="_blank" rel="noopener">root@demonC6.com</a> (root)<br>Status: R</p><p>hello man<br>&amp; d<br>&amp; q</p></blockquote><p>也可以通过telnet发邮件, 红字需要手打输入</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet mail<span class="selector-class">.demonC6</span><span class="selector-class">.com</span> <span class="number">25</span></span><br></pre></td></tr></table></figure><blockquote><p>Trying 192.168.10.129…<br>Connected to mail.demonC6.com.<br>Escape character is ‘^]’.<br>220 mail.demonC6.com ESMTP Postfix<br><font color="red">mail from: root @demonC6.com</font><br>250 2.1.0 Ok<br><font color="red">rcpt to: root @demonC6.com</font><br>250 2.1.5 Ok<br><font color="red">data</font><br>354 End data with <code>&lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt;</code><br><font color="red">Hello man, This is a test mail</font><br><font color="red">.                          #单独一个点表示内容结束</font><br>250 2.0.0 Ok: queued as EAECD44917<br><font color="red">quit</font><br>221 2.0.0 Bye<br>Connection closed by foreign host.<br>You have new mail in /var/spool/mail/root</p></blockquote><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mail</span></span><br></pre></td></tr></table></figure><blockquote><p>Heirloom Mail version 12.4 7/29/08.  Type ? for help.<br>“/var/spool/mail/root”: 2 messages 2 new<br>&gt;N  1 <a href="mailto:root@demonC6.com" target="_blank" rel="noopener">root@demonC6.com</a>      Sat May 12 11:42  14/513<br> N  2 <a href="mailto:root@demonC6.com" target="_blank" rel="noopener">root@demonC6.com</a>      Sat May 12 11:43  14/515<br>&amp; 2<br>Message  2:<br>From <a href="mailto:root@demonC6.com" target="_blank" rel="noopener">root@demonC6.com</a>  Sat May 12 11:43:31 2018<br>Return-Path: <a href="mailto:&#x72;&#111;&#x6f;&#116;&#x40;&#x64;&#101;&#x6d;&#x6f;&#110;&#67;&#x36;&#x2e;&#x63;&#111;&#109;" target="_blank" rel="noopener">&#x72;&#111;&#x6f;&#116;&#x40;&#x64;&#101;&#x6d;&#x6f;&#110;&#67;&#x36;&#x2e;&#x63;&#111;&#109;</a><br>X-Original-To: <a href="mailto:root@demonC6.com" target="_blank" rel="noopener">root@demonC6.com</a><br>Delivered-To: <a href="mailto:root@demonC6.com" target="_blank" rel="noopener">root@demonC6.com</a><br>Date: Sat, 12 May 2018 11:43:10 +0800 (CST)<br>From: <a href="mailto:root@demonC6.com" target="_blank" rel="noopener">root@demonC6.com</a><br>To: undisclosed-recipients:;<br>Status: R</p><p>Hello man, This is a test mail</p><p>&amp; q<br>Held 2 messages in /var/spool/mail/root</p></blockquote><div id="0x06-pei-zhi-dovecot-bing-qi-dong-fu-wu"></div> <br><br><br><h1>0x06 配置 dovecot 并启动服务</h1><ol><li>编辑dovecot配置文件，将第20行注释去掉，开启即可</li></ol><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">vim</span> /etc/dovecot/dovecot.<span class="keyword">conf</span></span><br></pre></td></tr></table></figure><blockquote><p>20 protocols = imap pop3 lmtp</p></blockquote><ol start="2"><li>启动pop3服务</li></ol><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">service dovecot start</span><br><span class="line">netstat -anptu  <span class="string">| grep 110</span></span><br></pre></td></tr></table></figure><blockquote><p>tcp        0      0 0.0.0.0:110                 0.0.0.0:*                   LISTEN      19822/dovecot<br>tcp        0      0 :::110                      :::*                        LISTEN      19822/dovecot</p></blockquote><ol start="3"><li>创建两个测试用户，测试相互收发邮件</li></ol><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd user1 &amp;&amp; <span class="keyword">echo</span> 123456 | passwd <span class="params">--stdin</span> user1</span><br><span class="line">useradd user2 &amp;&amp; <span class="keyword">echo</span> 123456 | passwd <span class="params">--stdin</span> user2</span><br></pre></td></tr></table></figure><ol start="4"><li>user1 给 user2 发送邮件</li></ol><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">su</span> - user1</span><br><span class="line">echo <span class="string">"user1 -&gt;  user2"</span> | mail user2<span class="variable">@demonC6</span>.com</span><br><span class="line">su user2</span><br><span class="line">mail -u user2</span><br></pre></td></tr></table></figure><blockquote><p>Heirloom Mail version 12.4 7/29/08.  Type ? for help.<br>“/var/mail/user2”: 1 message 1 new<br>&gt;N  1 <a href="mailto:user1@demonC6.com" target="_blank" rel="noopener">user1@demonC6.com</a>     Sat May 12 12:11  17/550<br>&amp; 1<br>Message  1:<br>From <a href="mailto:user1@demonC6.com" target="_blank" rel="noopener">user1@demonC6.com</a>  Sat May 12 12:11:58 2018<br>Return-Path: <a href="mailto:&#x75;&#115;&#x65;&#x72;&#49;&#64;&#100;&#101;&#x6d;&#x6f;&#110;&#x43;&#54;&#x2e;&#99;&#111;&#x6d;" target="_blank" rel="noopener">&#x75;&#115;&#x65;&#x72;&#49;&#64;&#100;&#101;&#x6d;&#x6f;&#110;&#x43;&#54;&#x2e;&#99;&#111;&#x6d;</a><br>X-Original-To: <a href="mailto:user2@demonC6.com" target="_blank" rel="noopener">user2@demonC6.com</a><br>Delivered-To: <a href="mailto:user2@demonC6.com" target="_blank" rel="noopener">user2@demonC6.com</a><br>Date: Sat, 12 May 2018 12:11:58 +0800<br>To: <a href="mailto:user2@demonC6.com" target="_blank" rel="noopener">user2@demonC6.com</a><br>User-Agent: Heirloom mailx 12.4 7/29/08<br>Content-Type: text/plain; charset=us-ascii<br>From: <a href="mailto:user1@demonC6.com" target="_blank" rel="noopener">user1@demonC6.com</a><br>Status: R<br>user1 -&gt;  user2<br>&amp; q</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input id=&quot;toc-toggle&quot; type=&quot;checkbox&quot;&gt;

&lt;!-- toc --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href
      
    
    </summary>
    
      <category term="服务搭建" scheme="demonxian3.github.io/categories/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
      <category term="linux" scheme="demonxian3.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>DNSmasq 服务搭建</title>
    <link href="demonxian3.github.io/2017/09/04/17090401_dnsmasq/"/>
    <id>demonxian3.github.io/2017/09/04/17090401_dnsmasq/</id>
    <published>2017-09-04T21:17:30.000Z</published>
    <updated>2019-06-19T04:31:18.500Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><ul><li><a href="#0x00-dnsmasq-jie-shao">0x00 DNSmasq介绍</a></li><li><a href="#0x01-dnsmasq-an-zhuang">0x01 DNSmasq安装</a></li><li><a href="#0x02-pei-zhi-fu-wu">0x02 配置服务</a></li><li><a href="#0x03-jie-xi-ce-shi">0x03 解析测试</a></li></ul><!-- tocstop --></div><div id="0x00-dnsmasq-jie-shao"></div> <br><br><br><h1>0x00 DNSmasq介绍</h1><blockquote><p>DNSmasq是一个小巧且方便地用于配置 <code>DNS</code> 和 <code>DHCP</code> 的工具，适用于小型网络，它提供了DNS功能和可选择的DHCP功能。</p><p>它服务那些只在本地适用的域名，这些域名是不会在全球的DNS服务器中出现的。DHCP服务器和DNS服务器结合，</p><p>并且允许DHCP分配的地址能在DNS中正常解析，而这些DHCP分配的地址和相关命令可以配置到每台主机中，</p><p>也可以配置到一台核心设备中（比如路由器），DNSmasq支持静态和动态两种DHCP配置方式。</p><p>因此如果需要快速搭建一个DNS服务或者DHCP服务，那么可以使用此程序来搭建</p></blockquote><div id="0x01-dnsmasq-an-zhuang"></div> <br><br><br><h1>0x01 DNSmasq安装</h1><p>这是 <a href="http://www.thekelleys.org.uk/dnsmasq/doc.html" target="_blank" rel="noopener">官方文档</a> </p><div id="shou-xian-shuo-shuo-zui-jian-dan-de-an-zhuang-fang-shi-tui-jian"></div> <h4><font color="gray"> 首先说说最简单的安装方式(推荐)</font></h4><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># fedora 系列</span></span><br><span class="line">yum -y install dnsmasq</span><br><span class="line"></span><br><span class="line"><span class="meta"># debian 系列</span></span><br><span class="line">sudo apt-<span class="keyword">get</span> install dnsmasq</span><br><span class="line"></span><br><span class="line"><span class="meta"># arch 系列</span></span><br><span class="line">sudo pacman -S dnsmasq</span><br></pre></td></tr></table></figure><p>如果采取本方式安装，可以跳过源码安装。轻松简单不折腾</p><div id="zai-lai-shuo-shuo-yuan-ma-an-zhuang-fang-shi"></div> <h4><font color="gray">再来说说源码安装方式</font></h4><p>这是 <a href="http://www.thekelleys.org.uk/dnsmasq/" target="_blank" rel="noopener">下载地址</a></p><p>下载 dnsmasq 源码包， 在上面下载地址看好平台和相应的版本，用 wget 下载  </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://www.thekelleys.org.uk/dnsmasq/dnsmasq-2.75.tar.gz</span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/shell1.png" alt></p><p>安装 GCC 编译工具</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> gcc</span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/shell2.png" alt></p><p>解压进入源码根目录下</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">-xf</span> <span class="selector-tag">dnsmasq-2</span><span class="selector-class">.75</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line"><span class="selector-tag">cd</span> <span class="selector-tag">dnsmasq-2</span><span class="selector-class">.75</span></span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/shell3.png" alt></p><p>编译安装, 上图所示已经有 Makefile 了，不需要再 ./configure 直接执行下面命令就行</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make <span class="keyword">install</span></span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/shell4.png" alt></p><p>安装完成后， 执行命令<code>echo $?</code> 若显示结果为0表示安装成功。执行 <code>dnsmasq -v</code> 查看版本</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/shell5.png" alt></p><div id="0x02-pei-zhi-fu-wu"></div> <br><br><br><h1>0x02 配置服务</h1><p>首先查询本机IP地址</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ifconfig -a</span></span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/shell6.png" alt></p><p>dnsmasq 配置</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>dnsmasq.conf    <span class="comment">#下面是需要修改的选项</span></span><br></pre></td></tr></table></figure><blockquote><p>resolv-file=/etc/resolv.conf</p><p>strict-order</p><p>listen-address=192.168.153.128</p><p>address=/demon.com/192.168.153.128</p><p>server=114.114.114.114</p><p>bogus-nxdomain=114.114.114.114</p></blockquote><p>参数解释</p><table><thead><tr><th>key</th><th>value</th></tr></thead><tbody><tr><td>resolve-file</td><td>定义dnsmasq从哪里获取上游DNS服务器的地址， 默认是从/etc/resolv.conf获取。</td></tr><tr><td>strict-order</td><td>表示严格按照resolv-file文件中的顺序从上到下进行DNS解析，直到第一个解析成功为止。</td></tr><tr><td>listen-address</td><td>定义dnsmasq监听的地址，默认是监控本机的所有网卡上。局域网内主机若要使用dnsmasq服务时，指定本机的IP地址</td></tr><tr><td>address</td><td>启用泛域名解析，即自定义解析A记录</td></tr><tr><td>bogus-nxdomain</td><td>为防止DNS污染，使用参数定义的DNS解析的服务器</td></tr><tr><td>server</td><td>指定dnsmasq程序使用哪个DNS服务器进行解析</td></tr></tbody></table><br><p>说明:</p><p>address 配置例子:</p><blockquote><p>address=/demon.com/127.0.0.1  #访问demon.com时的所有域名都会被解析成127.0.0.1</p></blockquote><p>bogus-nxdomain: </p><blockquote><p>如果是阿里云服务器上配置dnsmasq要启用此项。</p></blockquote><p>server:  对于不同的网站可以使用不同的域名对应解析如下配置</p><blockquote><p>server=/google.com/8.8.8.8    #表示对于google的服务，使用谷歌的DNS解析。</p></blockquote><p>以上配置完毕后，需要重启dnsmasq服务，重启完毕后局域网中的其他机器，就可以通过该DNS服务器解析公网的域名</p><div id="0x03-jie-xi-ce-shi"></div> <br><br><br><h1>0x03 解析测试</h1><p>启动 dnsmasq </p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">dnsmasq</span></span><br></pre></td></tr></table></figure><p>修改resolv.conf文件，将 DNS 服务器地址改为本机地址</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">vim</span>  /etc/resolv.<span class="keyword">conf</span></span><br></pre></td></tr></table></figure><blockquote><p># Generate by NetworkManager<br>domain demonxian3.com<br>search demonxian3.com demon.com demonx.com<br>nameserver 192.168.253.2</p></blockquote><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/shell7.png" alt><br><font color="red"> 注意: domain 和 search 不能共存；若都存在, 最后出现的将被使用。 程序寻找不到主机域名时，会对 search 后面的参数一一查找主机域名  </font></p><p> 测试是否解析成功</p> <figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nslookup www<span class="selector-class">.demonx</span><span class="selector-class">.cn</span></span><br><span class="line">nslookup www<span class="selector-class">.demonx</span><span class="selector-class">.xin</span></span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/shell8.png" alt></p><p>因为之前配置了 address=/demon.com/192.168.153.128, 所以当我们访问<code>demon.com</code>时被解析成本机的IP地址</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/shell9.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input id=&quot;toc-toggle&quot; type=&quot;checkbox&quot;&gt;

&lt;!-- toc --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href
      
    
    </summary>
    
      <category term="服务搭建" scheme="demonxian3.github.io/categories/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
      <category term="linux" scheme="demonxian3.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>CentOS6.5 系统安装详解(下)</title>
    <link href="demonxian3.github.io/2017/09/01/17090102_centos6/"/>
    <id>demonxian3.github.io/2017/09/01/17090102_centos6/</id>
    <published>2017-09-01T11:14:46.000Z</published>
    <updated>2019-06-19T05:45:06.219Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><!-- tocstop --></div>本篇主要是对 CentOS6.5 系统安装完后的初始配置.<p>继续接着上面的安装, 安装完后会出现下面界面 点击reboot重启</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/01.png" alt="01"></p><p>重启后可以看到下面的tty终端界面  因为这就是最小化安装 输入root和之前配置的密码</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/02.png" alt="02"></p><p>1关闭防火墙</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/03.png" alt="03"></p><p>iptables -F  命令用于清空规则<br>/etc/init.d/iptables save  用于保存当前被清空的规则<br>chkconfig  iptables  stop  开机不允许启动防火墙<br>chkconfig  –list   iptables 查看iptables是否关.<br>systemctl stop firewalld<br>systemctl disabled firewalld</p><p>2关闭selinux<br>vim /etc/selinux/config<br> 将红色的地方的变量值改为disabled</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/04.png" alt="04"></p><p>以上操作就可以使得selinux 开机不自启了 但是当前还是启动的 下面的命令可以关闭当前的selinux<br>getenforce     查看selinux服务状态<br>setenforce 0  关闭当前selinux<br>sed -i ‘s/SELINUX=enforcing/SELINUX=disabled’ /etc/selinux/config</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/05.png" alt="05"></p><p>3.网络配置<br>把上面两个服务iptables 和 selinux 关闭后 我们来配置一下网络相关的<br>如果按照我前面安装系统时配置是可以访问外网的 如下我们ping一下百度</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/06.png" alt="06"></p><p>在网络这方面有很多人都卡死在此, 因此我详细讲下<br>cd  /etc/sysconfig/network-scripts/<br>vim  ifcfg-eth0</p><p>下面就是网路的配置文件 你可以检查一下是否有误</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/07.png" alt="07"></p><p>Deivce 表示设备名<br>TYPE    表示网络类型 这里是以太网<br>uuid    表示设备的ID<br>onboot  表示是否启动 这个很重要必须打开<br>NM_CONTROLED 表示是否受network manager管理<br>IPADDR 表示IP地址<br>prefix 表示网络位前缀<br>gateway 表示网关<br>dns1 表示首选dns</p><p>确保onboot选项是开启的后<br>setup 进入配置界面</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/10.png" alt="10"></p><p>选择第一个配置设备</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/11.png" alt="11"></p><p>选择第一个配置以太网卡</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/12.png" alt="12"></p><p> nmtui<br>systemctl restart network</p><p>4.修改主机名<br> 编上面自己配置一下, 配置完记得重启服务<br>/etc/init.d/network restart<br>更改主机名   当然我安装的时候已经改过了</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/13.png" alt="13"></p><p>上面的主机名只是临时生效<br>要想永久生效 需要配置一个文件命令如下<br>vim /etc/sysconfig/network<br>然后出现如下图 在下图的地方变量值改为你的主机名就可以了</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/14.png" alt="14"></p><p> 添加网络映射 这里是IP地址与你主机名的映射 类似DNS</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/15.png" alt="15"></p><p>5.配置本地和网路yum源<br>首先挂载光驱, 记得在虚拟机上连接你的光盘</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/16.png" alt="16"></p><p> 编辑自启文件, 实现开机自动挂载光盘<br> vim /etc/fstab 在最后一行加入如下</p><p>echo “/dev/sr0 /mnt iso9660 defaults 0 0 “ &gt;&gt; /etc/fstab</p><p>mount </p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/17.png" alt="17"></p><p> 进入yum.repos.d 这个目录是用于存放yum源的<br>每个文件必须以.repo后缀结尾<br>输入下面的命令可以完成本地yum源的配置</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/20.png" alt="20"></p><p>执行以下步骤可以配置好网络yum源<br> ( 1 ) 备份：mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak<br> ( 2 ) 下载：wget -O /etc/yum.repo.d/CentOS-Base.repo <a href="http://mirrors.aliyun.com/repo/Centos-6.repo" target="_blank" rel="noopener">http://mirrors.aliyun.com/repo/Centos-6.repo</a><br> ( 3 ) 生成：yum makecache</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/21.png" alt="21"></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/22.png" alt="22"></p><p>其他版本的网络阿里源：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#CentOS</span> <span class="number">5</span>版本：</span><br><span class="line"></span><br><span class="line">wget -O /etc/yum<span class="selector-class">.repos</span><span class="selector-class">.d</span>/CentOS-Base<span class="selector-class">.repo</span> http:<span class="comment">//mirrors.aliyun.com/repo/Centos-5.repo</span></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#CentOS</span> <span class="number">6</span>版本：</span><br><span class="line"></span><br><span class="line">wget -O /etc/yum<span class="selector-class">.repos</span><span class="selector-class">.d</span>/CentOS-Base<span class="selector-class">.repo</span> http:<span class="comment">//mirrors.aliyun.com/repo/Centos-6.repo</span></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#CentOS</span> <span class="number">7</span>版本:</span><br><span class="line"></span><br><span class="line">wget -O /etc/yum<span class="selector-class">.repos</span><span class="selector-class">.d</span>/CentOS-Base<span class="selector-class">.repo</span> http:<span class="comment">//mirrors.aliyun.com/repo/Centos-7.repo</span></span><br></pre></td></tr></table></figure><p> 如果用的是RHEL6 ,需要修改下repo文件:</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">sed</span> -i <span class="string">'s/<span class="variable">$releasever</span>/6/g'</span> CentOS-Base.repo</span><br></pre></td></tr></table></figure><p> poweroff 做快照</p><p>6.克隆虚拟机<br>配好本地和网路yum源后创建一个快照,  克隆出一台虚拟机<br>配置快照之前 建议把开机启动模式调为3 如果你是最小化安装  ( 没有图形界面 没有5模式 ) 默认就是3</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/23.png" alt="23"></p><p>在编辑虚拟机里头可以看到创建快照</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/24.png" alt="24"></p><p> 拍摄一个快照 输入快照名字 就可以了</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/25.png" alt="25"></p><p>单机  虚拟机–》管理–》克隆</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/26.png" alt="26"></p><p> 选择当前状态 也可以选择现有快照</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/27.png" alt="27"></p><p>创建完整克隆  这样新的克隆机子和原来的机子就不会相互影响</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090102_centos6/30.png" alt="30"></p><p>配置名字和文件路径</p><p>![31]</p><p>完成</p><p>然后更改一下IP 和 主机名避免冲突<br>进入网络配置文件 vim /etc/sysconfig/network-scripts/ifcfg-eth0<br>把IP地址改一下 删除网卡物理地址</p><p>![32]</p><p>删除网卡配置文件进入/etc/sysconfig/network-scripts/目录下<br>如果这里存在eth1就把他删了 </p><p>![33]</p><p> 修改主机名  vim /etc/sysconfig/network</p><p>![34]</p><p>修改网路映射  vim /etc/hosts</p><p>![35]</p><p> 删除规则避免开机引用eth1网路配置 rm -rf /etc/udev/rules.d/70-persistent-cd.rules文件</p><p>![36]</p><p>重启系统然后可以看见自动生成IP地址<br>如果不行 可以试试把70-persistent-net.rules删除 然后重启</p><p>![37]</p><p>改好后reboot 创建快照</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input id=&quot;toc-toggle&quot; type=&quot;checkbox&quot;&gt;

&lt;!-- toc --&gt;



&lt;!-- tocstop -
      
    
    </summary>
    
      <category term="系统安装" scheme="demonxian3.github.io/categories/%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/"/>
    
    
      <category term="linux" scheme="demonxian3.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>CentOS6.5 系统安装详解(上)</title>
    <link href="demonxian3.github.io/2017/09/01/17090101_centos6/"/>
    <id>demonxian3.github.io/2017/09/01/17090101_centos6/</id>
    <published>2017-09-01T11:05:13.000Z</published>
    <updated>2019-06-19T05:13:54.397Z</updated>
    
    <content type="html"><![CDATA[<!-- img --><div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><!-- tocstop --></div><p>新建一个虚拟机 选择典型 单机下一步</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/01.png" alt="01"></p><p>选择稍后安装系统</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/02.png" alt="02"></p><p>选择操作系统 注意32位和64位, 一般都是用64位的</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/03.png" alt="03"></p><p>编辑虚拟机名称 和 虚拟机存放在真机硬盘上的位置</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/04.png" alt="04"></p><p>分配硬盘大小 选择单个文件</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/05.png" alt="05"></p><p>此处先不配置硬件 直接点击完成</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/06.png" alt="06"></p><p>选择编辑虚拟机设置</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/07.png" alt="07"></p><p>配置如下 内存给2G</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/08.png" alt="08"></p><p>CPU双核意思意思一下</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/09.png" alt="09"></p><p>光驱配置 ,  记得点击启动链接</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/10.png" alt="10"></p><p>这里要选择如下centos镜像包</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/11.png" alt="11"></p><p>网络建议选桥接 NAT也是可以的</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/12.png" alt="12"></p><p>总的配置如下</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/13.png" alt="13"></p><p> 编辑好后 开启虚拟机出现下面界面选择第一项</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/14.png" alt="14"></p><p> 选择跳过</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/15.png" alt="15"></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/16.png" alt="16"></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/17.png" alt="17"></p><p>选择操作系统的语言 英语好就不选中文了 后面有个选项可以让系统支持中文,<br>所以不用太纠结这里选什么语言</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/18.png" alt="18"></p><p>选择键盘 一般用的都是美式键盘</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/19.png" alt="19"></p><p>选择第一个 基本存储设备</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/20.png" alt="20"></p><p>格式化旧的虚拟机数据</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/21.png" alt="21"></p><p>配置主机名  112是我的IP地址最后一位 然后编辑网络</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/22.png" alt="22"></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/23.png" alt="23"></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/24.png" alt="24"></p><p>时区选择上海</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/25.png" alt="25"></p><p>这里输入root密码</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/26.png" alt="26"></p><p>磁盘分区选择最后一个</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/27.png" alt="27"></p><p>分区如下, 这里不能分错, 不然得重新来</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/28.png" alt="28"></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/29.png" alt="29"></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/30.png" alt="30"></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/31.png" alt="31"></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/32.png" alt="32"></p><p>格式化</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/33.png" alt="33"></p><p>写入</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/34.png" alt="34"></p><p>这里直接选择next</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/35.png" alt="35"></p><p>一般企业要求最小化安装 选择现在编辑</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/36.png" alt="36"></p><p>选中下面所选的</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/37.png" alt="37"></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/38.png" alt="38"></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/39.png" alt="39"></p><p>开始安装啦…</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/17090101_centos6/40.png" alt="40"></p><p>传送带：CentOS6 系统安装详解</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;!-- img --&gt;
&lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input id=&quot;toc-toggle&quot; type=&quot;checkbox&quot;&gt;

&lt;!-- toc --&gt;



&lt;
      
    
    </summary>
    
      <category term="系统安装" scheme="demonxian3.github.io/categories/%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/"/>
    
    
  </entry>
  
  <entry>
    <title>Owncloud 存储云服务搭建</title>
    <link href="demonxian3.github.io/2017/08/18/17081801_owncloud/"/>
    <id>demonxian3.github.io/2017/08/18/17081801_owncloud/</id>
    <published>2017-08-18T20:46:39.000Z</published>
    <updated>2019-06-17T00:16:09.000Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><!-- tocstop --></div><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud2.png" alt></p><blockquote><p>owncloud是一款开源的存储云，用php写的，其作用可以像百度网盘那样存放文件到这个云当中，</p><p>只要能连上网，手机，平板，电脑都可以从中下载或者上传文件，用起来非常还不错，部署的过程也很简单，废话不多说，开始吧。</p><p>测试系统：RHEL 7.2</p></blockquote><p>为避免影响看看是否安装了其他版本的 Mysql 和 Apache</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -<span class="keyword">qa</span> |<span class="keyword">grep</span> mysql</span><br><span class="line">rpm -<span class="keyword">qa</span> |<span class="keyword">grep</span> httpd</span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud3.png" alt></p><p>安装相关的组件和服务</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">yum</span> -y install httpd php php-mysql <span class="keyword">mariadb-server </span><span class="keyword">mariadb </span>sqlite php-dom php-mbstring php-gd php-pdo</span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud4.png" alt></p><p>安装好后启动服务，需要注意的是 mysql 在rhel 7中被改名为 mariadb</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="literal">start</span> httpd</span><br><span class="line">systemctl <span class="literal">start</span> mariadb.service</span><br></pre></td></tr></table></figure><p>关闭防火墙和selinux</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables –F</span><br><span class="line">setenforce <span class="number">0</span></span><br></pre></td></tr></table></figure><p>初始化mariadb数据库，并为owncloud软件创建库</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin –uroot password “123456”   <span class="comment">#创建密码</span></span><br><span class="line">mysql -uroot -p123456                 <span class="comment">#进入数据库</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">database</span> owncloud;             <span class="comment">#创建owncloud库</span></span><br></pre></td></tr></table></figure><p>下载 <a href="https://download.owncloud.org/community/owncloud-10.0.2.zip" target="_blank" rel="noopener">owncloud</a> 将下载好后的owncloud软件上传，可以使用rz命令上传，如果没有rz命令用yum安装：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum –y <span class="keyword">install</span> lrzsz</span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud5.png" alt></p><p>上传好后解压到/var/www/html/下面</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">unzip  owncloud-<span class="number">10.0</span>.<span class="number">1</span>.zip  &amp;&amp;  mv  owncloud  <span class="regexp">/var/</span>www<span class="regexp">/html/</span></span><br><span class="line">chown –R apache:apache <span class="regexp">/var/</span>www<span class="regexp">/html/</span>    <span class="comment">#赋予apache权限</span></span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud6.png" alt></p><p>创建好后，使用浏览器访问</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud7.png" alt></p><p>很遗憾 yum出来的php版本太低，owncloud需要5.6版本以上。</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud8.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud9.png" alt></p><p>给php升级或者添加模块确实很让人头疼，下面就对php进行升级</p><p>到网下载php5.6的rpm包，然后上传到服务器</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud10.png" alt></p><p>注意版本需要对应，然后将其解压   </p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud11.png" alt></p><p>这时候，如果尝试直接安装php-5.6就会出现依赖错误，如下</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud12.png" alt></p><p>这里有一个比较好使的命令，可以自动解决依赖关系进行升级，进入php5.6目录下面：</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud13.png" alt><br><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud14.png" alt></p><p>于是就可以成功的自己解决依赖关系的升级。</p><p>当然有些人会说，我没有你那个php5.6的包啊，我去官网找半天都找不到，所以这里再介绍一个升级php的方法，就是在线升级。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/yum<span class="selector-class">.repos</span><span class="selector-class">.d</span>/remi<span class="selector-class">.repo</span>   #写入以下内容</span><br></pre></td></tr></table></figure><blockquote><p>[remi]</p><p>name = Remi’s RPM repository for Enterprise Linux 7-$basearch</p><p>#baseurl=<a href="http://rpms.remirepo.net/enterprise/6/remi/$basearch/" target="_blank" rel="noopener">http://rpms.remirepo.net/enterprise/6/remi/$basearch/</a></p><p>mirrorlist=<a href="http://rpms.remirepo.net/enterprise/7/remi/mirror" target="_blank" rel="noopener">http://rpms.remirepo.net/enterprise/7/remi/mirror</a></p><p>enabled=1</p><p>gpgcheck=0</p><p>gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi</p><p>[remi-php56]</p><p>name = Rmei’s PHP5.6 RPM respository for Enterprise Linux7-$basearch</p><p>#baseurl=<a href="http://rpms.remirepo.net/enterprise/7/php56/mirror" target="_blank" rel="noopener">http://rpms.remirepo.net/enterprise/7/php56/mirror</a></p><p># WARNING: If you enable this repository, you must also enable “remi”</p><p>enabled=1</p><p>gpgcheck=0</p><p>gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi</p></blockquote><p>写好后保存退出，然后就可以使用</p><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum –y <span class="keyword">update</span> php*</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum –y<span class="built_in"> upgrade </span>php*</span><br></pre></td></tr></table></figure><blockquote><p>#update 升级所有包，改变软件和系统的配置，系统版本和内核都升级</p></blockquote><blockquote><p>#upgrade 升级所有包，不改变软件和系统的配置，系统版本升级，内核不变</p></blockquote><p>选哪种看个人的情况, 这是上面两种升级php的方法，既然升级好了，再使用浏览器来访问刚刚的地址</p><p>不过记得先重启一下apache服务：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">systemctl restart httpd</span></span><br></pre></td></tr></table></figure><p>重启服务后，打开浏览器访问，然后就可以创建管理员账号了，注意：这里有个很坑爹的地方</p><p>就是mariadb的root用户不允许远程访问，只能是localhost访问，因此使用的浏览器也必须</p><p>中虚拟机机子里打开，否则如果使用远程会经常报访问权限不足。</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud15.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud16.png" alt></p><p>配置一下数据库信息</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud17.png" alt></p><p>过一会跳转到登录界面，输入用户名和密码</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud18.png" alt></p><p>然后就可以开始使用了</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/owncloud19.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input id=&quot;toc-toggle&quot; type=&quot;checkbox&quot;&gt;

&lt;!-- toc --&gt;



&lt;!-- tocstop -
      
    
    </summary>
    
      <category term="服务搭建" scheme="demonxian3.github.io/categories/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
      <category term="linux" scheme="demonxian3.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Github 使用教程</title>
    <link href="demonxian3.github.io/2017/06/01/17060101_github/"/>
    <id>demonxian3.github.io/2017/06/01/17060101_github/</id>
    <published>2017-06-01T02:22:35.000Z</published>
    <updated>2019-06-17T00:13:00.000Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><ul><li><a href="#github-de-shi-yong">GitHub的使用</a></li></ul><!-- tocstop --></div><div id="github-de-shi-yong"></div> <br><br><br><h1>GitHub的使用</h1><ol><li><p>首先在 <a href="http://github.com" target="_blank" rel="noopener">github</a> 上面注册一个账号，这个就不演示了吧。</p></li><li><p>生成本地秘钥 ssh-keygen</p></li></ol><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen  <span class="meta">#生成公私密钥对</span></span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/github1.png" alt></p><ol start="3"><li>查看公钥文件内容,先复制上, 待会要把公钥复制到github账户上面</li></ol><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/github2.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/github3.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/github4.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/github5.png" alt></p><p>4.然后把本地公钥复制进去既可，如果不知道本地公钥是什么可以到下面的目录查看</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/github6.png" alt></p><p>添加后过一会发个邮件给你</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/github7.png" alt></p><ol start="5"><li>添加成功后测试登录 ssh –T <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a></li></ol><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/github8.png" alt></p><ol start="6"><li>创建本地仓库, 回到主页点击New repository</li></ol><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/github9.png" alt></p><p>第一次创建需要邮箱验证的</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/githuba.png" alt></p><ol start="7"><li>验证好后，填写创建信息</li></ol><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/githubb.png" alt></p><ol start="8"><li>然后点击创建，出现下面的界面点ssh，因为我们前面使用的是ssh秘钥认证</li></ol><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/githubc.png" alt></p><ol start="9"><li>下面开始在本地创建一个新的仓库与gihub仓库连接，也就是照上图create a new repository 打就可以了</li></ol><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mkdir git &amp;&amp; cd git</span><br><span class="line"></span><br><span class="line">echo <span class="string">"# IPhelper"</span> &gt;&gt; README.md</span><br><span class="line"></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line">git add README.md</span><br><span class="line"></span><br><span class="line">git commit -m <span class="string">"first commit"</span></span><br><span class="line"></span><br><span class="line">git remote add origin git@github<span class="selector-class">.com</span>:demonxian3/IPhelper.git</span><br><span class="line"></span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><p>当你看到下面的界面表示本地仓库的创建和连接成功</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/githubd.png" alt></p><p>到github页面上点击your profile</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/githube.png" alt></p><p>可以看见多出了一个仓库</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/githubf.png" alt></p><ol start="10"><li>配置一下用户信息</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--global user.name <span class="string">"demon.x"</span></span><br><span class="line"></span><br><span class="line">git<span class="built_in"> config </span>--global user.email demon@demonx.cn</span><br></pre></td></tr></table></figure><ol start="11"><li>模拟同步测试</li></ol><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo hello man &gt; <span class="number">1.</span>html           <span class="meta">#新增内容</span></span><br><span class="line">git <span class="keyword">add</span> <span class="number">1.</span>html                    <span class="meta">#缓存添加</span></span><br><span class="line">git commit -m <span class="string">"add a html"</span>        <span class="meta">#本地提交</span></span><br><span class="line">git <span class="keyword">push</span> -u origin master         <span class="meta">#远程提交(需要验证)</span></span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/githubg.png" alt></p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">log</span>                            <span class="meta">#查看提交版本号</span></span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/githubh.png" alt></p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">git </span><span class="string">pull </span><span class="built_in">--rebase</span>                          　　　　　　　　　 <span class="comment">#与远程同步（拉数据）</span></span><br><span class="line"></span><br><span class="line"><span class="string">git </span><span class="string">reset </span><span class="built_in">--hard</span> <span class="string">8c3a7254747d262f547dcb3f4623fd12dc235e0c </span>    <span class="comment">#版本回退，hard值从log里看</span></span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/githubi.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input id=&quot;toc-toggle&quot; type=&quot;checkbox&quot;&gt;

&lt;!-- toc --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href
      
    
    </summary>
    
      <category term="工具使用" scheme="demonxian3.github.io/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="git" scheme="demonxian3.github.io/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Git 客户端工具使用</title>
    <link href="demonxian3.github.io/2017/05/31/17053101_gitcli/"/>
    <id>demonxian3.github.io/2017/05/31/17053101_gitcli/</id>
    <published>2017-05-31T02:14:59.000Z</published>
    <updated>2019-06-17T00:12:49.000Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><ul><li><a href="#git-gong-ju-shi-yong">Git 工具使用</a></li></ul><!-- tocstop --></div><div id="git-gong-ju-shi-yong"></div> <br><br><br><h1>Git 工具使用</h1><p>针对 Windows系统 的git软件常用的有两款: <a href="https://git-for-windows.github.io/" target="_blank" rel="noopener">Msysgit</a>   <a href="https://tortoisegit.org/download/" target="_blank" rel="noopener">TortoriseGIT</a> , 下面分别介绍这两款</p><p>第一个msysgit可以单独使用，第二个工具tortoisegit需要结合第一个使用，先下载第一个 Msysgit ，安装一路点下一步即可</p><div id="msysgit-gong-ju"></div> <h4>msysgit工具</h4><p>安装好后点击右键可以看到多出两个选项</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/git5.png" alt></p><p>右键的 Git Bash 可以运行一些linux shell 命令，包括 git 命令</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/git6.png" alt></p><p>右键点击 Git GUI Here, 选择克隆已存在的代码库</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/git7.png" alt></p><p>这里可以填写自己虚拟机 <a href="../gitserver/">搭建的Git服务器</a> ，也可以填写 github地址 或者 其他远程地址</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/git8.png" alt></p><p>从这里可以看出git需要建立在openssh上的，所以确保服务器上的 sshd 是开启的</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/git9.png" alt><br><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/gita.png" alt></p><p>然后就可以把远程仓库的代码 clone 下来了</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/gitb.png" alt></p><p>同时会弹出下面的GUI管理界面，Checkout一下</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/gitc.png" alt></p><p>下面模拟一下开发更新修改，随便添加一些文件夹和html文件</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/gitd.png" alt></p><p>然后在GUI里头点 <code>RESCAN</code> 重新扫描，可以扫到新加的内容</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/gite.png" alt></p><p>存储到暂存区域，如下图文件就会跑到绿色下面的框框去了，相当于执行 <code>git -A *</code></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/gitf.png" alt></p><p>Git Bash设置一下个人信息，然后点击签名</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/gitg.png" alt></p><p>返回GUI 点击签名 Sign Off 按钮</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/gith.png" alt></p><p>提交到本地仓库，相当于执行 <code>git commit -m &quot;xxx&quot;</code></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/giti.png" alt></p><p>提交到远程仓库，相当于执行 <code>git push origin master</code></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/gitj.png" alt><br><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/gitk.png" alt></p><div id="tortoisegit-gong-ju"></div> <h4>tortoiseGit工具</h4><p>创建一个目录test，在目录下面右键Git clone，同样这里就设置 虚拟机搭建的Git服务器作为URL地址</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/tor1.png" alt></p><p>ssh 添加缓存提示有弹出来了</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/tor2.png" alt></p><p>选择是，保存秘钥输入一下GIT用户的密码既可下载代码下来</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/tor3.png" alt></p><p>添加一个5.html后(模拟开发更改代码)，右键选择ADD，添加到暂存区域</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/tor4.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/tor5.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/tor6.png" alt></p><p>右键点击Git Commit -&gt; “master”后，输入message既可提交到本地仓库</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/tor7.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/tor8.png" alt></p><p>如果要提交到远程仓库点击上面界面的push按钮既可, 可以参考 <a href="http://www.yiibai.com/git/" target="_blank" rel="noopener">易百教程</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input id=&quot;toc-toggle&quot; type=&quot;checkbox&quot;&gt;

&lt;!-- toc --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href
      
    
    </summary>
    
      <category term="工具使用" scheme="demonxian3.github.io/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
    
      <category term="git" scheme="demonxian3.github.io/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>Git 服务搭建</title>
    <link href="demonxian3.github.io/2017/05/31/17053101_gitser/"/>
    <id>demonxian3.github.io/2017/05/31/17053101_gitser/</id>
    <published>2017-05-31T00:36:48.000Z</published>
    <updated>2019-06-18T04:57:14.000Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><ul><li><a href="#0x00-git-xiang-guan-gai-nian">0x00 Git 相关概念</a></li><li><a href="#0x01-git-fu-wu-da-jian">0x01 Git 服务搭建</a></li><li><a href="#0x02-git-ming-ling-yuan-ma-an-zhuang">0x02 Git命令源码安装</a></li></ul><!-- tocstop --></div><p>从本文你可以习得以下知识:</p><blockquote><ol><li>GIT相关概念介绍</li><li>GIT服务器搭建(CentOS6.5)</li><li>GIT命令源码安装</li></ol></blockquote><div id="0x00-git-xiang-guan-gai-nian"></div> <br><br><br><h1>0x00 Git 相关概念</h1><div id="git-jian-jie"></div> <h4>GIT简介</h4><blockquote><p>Git 是一个开源的分布式版本控制系统，可以有效高速处理非常大的项目版本管理。</p><p>Git 是Linux之父Linux Torvlds 为管理linux内核而开发的一个开发源码的版本控制软件，目前也是用的比较火。</p></blockquote><div id="gitlab-jian-jie"></div> <h4>GITLAB简介</h4><blockquote><p>GitLab 是利用 Ruby on Rails 一个开源的版本管理系统，</p><p>实现一个自托管的Git 项目仓库，通过Web 界面进行访问公开或者私人项目。</p><p>它和Github（全球最大的开源或私人代码托管平台）的功能很像，能浏览源码，管理缺陷和注释，</p><p>可以浏览文件历史库，可以使用Wall程序聊天交流。提供代码片段收集功能和实现代码复用，便于日后查找。</p></blockquote><div id="gong-zuo-yuan-li"></div> <h4>工作原理</h4><blockquote><p>1.Git在本地磁盘保存着当前项目的历史更新，处理速度很快。</p><p>2.浏览项目历史更新摘要，Git直接从本地数据库读取显示。</p><p>3.查看版本差异时，Git进行差异运算，而不需要远程服务器。</p><p>4.Git可以脱机工作，可以频繁提交和更新代码，有网时再上传。</p></blockquote><div id="wen-jian-zhuang-tai-wen-jian-zai-git-nei-you-san-chong-zhuang-tai"></div> <h4>文件状态 (文件在Git内有三种状态)</h4><blockquote><ol><li><p>已提交（committed）</p></li><li><p>已修改（modified）</p></li><li><p>已暂存（staged）</p></li></ol></blockquote><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/git1.png" alt></p><p>如果是通过git clone  那么其中 .git 就是GIT目录</p><p>如果是通过git clone –bare 那么新建的目录本身就是GIT目录</p><p>GIT目录用来保存元数据和对象数据库</p><p>每次克隆镜像仓库都会从这个目录里面拷贝数据</p><div id="gong-zuo-liu-cheng"></div> <h4>工作流程</h4><blockquote><p>1.从仓库取出某版本的目录称为工作目录</p><p>2.在工作目录进行修改和编辑，然后进行快照保存到暂存区域</p><p>3.提交更新，将暂存区域的文件转到Git目录当中</p></blockquote><div id="git-chang-yong-ming-ling"></div> <h4>Git常用命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">git init here     　　　　　　　　　　   <span class="comment">#创建本地仓库 .git文件里存储了版本信息和标记</span></span><br><span class="line">git remote add origin git@github.com:demonxian3/hellowrold.git       <span class="comment">#关联本地和远程仓库</span></span><br><span class="line">git add   　　　　        　　　　　　　　<span class="comment">#从本地仓库增加，结果会保存到本机缓存里</span></span><br><span class="line">git commit –m “注释”      　　　　　　　　<span class="comment">#提交本机缓存的内容到本机HEAD里面</span></span><br><span class="line">git push origin master   　　　　　　　　<span class="comment">#把本地仓库提交到远程仓库 origin代表关联的远程仓库</span></span><br><span class="line">git pull origin master   　　　　　　　　<span class="comment">#从远程把新变化拉下来</span></span><br><span class="line">git status               　　　　　　　　<span class="comment">#查看git状态</span></span><br><span class="line">git add –A               　　　　　　　　<span class="comment">#提交全部修改</span></span><br><span class="line">git config –global user.name “xxx”    <span class="comment">#配置用户名，上传到远程仓库的用户信息</span></span><br><span class="line">git config –global user.email “xxx”   <span class="comment">#配置用户邮箱</span></span><br><span class="line">git config –list          　　　　　　  <span class="comment">#查看配置列表</span></span><br><span class="line">git rm xxx                            <span class="comment">#从本地仓库中删除指定文件</span></span><br><span class="line">git rm –r xxx              　　　　　　 <span class="comment">#从本地仓库中删除指定目录</span></span><br><span class="line">git pull --rebase                     <span class="comment">#与远程同步（拉数据）</span></span><br><span class="line">git <span class="built_in">log</span>　　　　　　　　　　　　　　　　　　<span class="comment">#查看历史提交版本</span></span><br><span class="line">git reset --hard 8c3a7254747d262f547  <span class="comment">#版本回退，hard值从log里看</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#使用.gitignore文件忽略指定的内容</span></span><br></pre></td></tr></table></figure><div id="0x01-git-fu-wu-da-jian"></div> <br><br><br><h1>0x01 Git 服务搭建</h1><ol><li>在服务端上搭建git服务，IP地址：192.168.1.112</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">yum –y install git    　　　　<span class="comment">#需要ssh支持，某些发行版需要安装git-core  默认版本是1.8.3，新版本可以参考后面的git源码安装</span></span><br><span class="line">useradd –m git        　　　　<span class="comment">#创建服务用户</span></span><br><span class="line"><span class="built_in">echo</span> git:123456 | chpasswd   <span class="comment">#设置git 密码</span></span><br><span class="line">mkdir /project  　　　　　　   <span class="comment">#本地仓库名</span></span><br><span class="line">chmod 755 –R /project</span><br><span class="line">chown git:git –R /project</span><br><span class="line">su git</span><br><span class="line"><span class="built_in">cd</span> /project</span><br><span class="line">mkdir project.git      <span class="comment">#创建git测试目录及文件</span></span><br><span class="line"><span class="built_in">cd</span> project.git</span><br><span class="line">git --bare init  　　　　<span class="comment">#初始化仓库</span></span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/git2.png" alt></p><ol start="2"><li>在客户端初始化测试，将服务端的project项目git clone下来</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir git &amp;&amp; <span class="built_in">cd</span> git          　　　　　　　　　　 <span class="comment">#创建测试目录</span></span><br><span class="line">git <span class="built_in">clone</span> git@192.168.1.112:/project/project.git  <span class="comment">#从远程仓库拷贝到测试目录</span></span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/git3.png" alt></p><p>可以看到测试目录里把远程目录的project.git弄下来了</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/git4.png" alt></p><p>下面是标准的代码提交过程: 客户端模拟开发更新提交</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> project &amp;&amp; <span class="built_in">echo</span> “This is <span class="built_in">test</span>”　&gt; 1.html  <span class="comment">#模拟测试内容</span></span><br><span class="line">git add .   　　　　　　　　　　<span class="comment">#添加到暂存缓区</span></span><br><span class="line">git commit –m “first”        <span class="comment">#提交到本地仓库,会输出提示信息</span></span><br><span class="line">git remote add origin git@192.168.1.112:/project/project.git  <span class="comment">#确认本地和远程是否关联</span></span><br><span class="line">git push origin master 　　　 <span class="comment">#把本地代码上传到远程代码</span></span><br></pre></td></tr></table></figure><p>设置个人用户信息</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config –global user.name “demon.demon”</span><br><span class="line">git config –global user.email <span class="string">"demon@demon.cn"</span></span><br></pre></td></tr></table></figure><p>事实上，除非公司内部要求, 否则GIT服务器并不需要我们搭建，因为使用 github 就可以满足我们的需求 , </p><p>github 私人库是收费的，但公开库是免费的， 关于 <a href="../github/">github教程</a></p><div id="0x02-git-ming-ling-yuan-ma-an-zhuang"></div> <br><br><br><h1>0x02 Git命令源码安装</h1><p>如果git 命令 使用 yum 或 apt 等软件包管理工具安装的话，版本会比较低，这里通过源码安装的方式来安装git</p><p>下面是git源码下载地址，可以手动下载下来在上传到服务器上面，或者 wget</p><p><a href="https://mirrors.edge.kernel.org/pub/software/scm/git/" target="_blank" rel="noopener">mirrors</a>  <a href="https://github.com/git/git/releases" target="_blank" rel="noopener">github</a> </p><ol><li>移除旧版本git，将旧版本先卸载</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br><span class="line">yum remove git</span><br></pre></td></tr></table></figure><ol start="2"><li>安装所需软件包</li></ol><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">yum</span> <span class="comment">install</span> <span class="comment">curl</span><span class="literal">-</span><span class="comment">devel</span> <span class="comment">expat</span><span class="literal">-</span><span class="comment">devel</span> <span class="comment">gettext</span><span class="literal">-</span><span class="comment">devel</span> <span class="comment">openssl</span><span class="literal">-</span><span class="comment">devel</span> <span class="comment">zlib</span><span class="literal">-</span><span class="comment">devel</span> <span class="comment">gcc</span><span class="literal">-</span><span class="comment">c</span><span class="literal">+</span><span class="literal">+</span> <span class="comment">perl</span><span class="literal">-</span><span class="comment">ExtUtils</span><span class="literal">-</span><span class="comment">MakeMaker</span></span><br></pre></td></tr></table></figure><ol start="3"><li>将源码包下载下来</li></ol><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/usr/</span>src &amp;&amp; wget https:<span class="regexp">//</span>www.kernel.org<span class="regexp">/pub/</span>software<span class="regexp">/scm/gi</span>t<span class="regexp">/git-2.7.3.tar.gz</span></span><br></pre></td></tr></table></figure><ol start="4"><li>解压</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">xf</span> <span class="selector-tag">git-2</span><span class="selector-class">.7</span><span class="selector-class">.3</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span>  &amp;&amp;  <span class="selector-tag">cd</span> <span class="selector-tag">git-2</span><span class="selector-class">.7</span><span class="selector-class">.3</span></span><br></pre></td></tr></table></figure><ol start="5"><li>配置编译安装到/usr/git目录下面</li></ol><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span> configure</span><br><span class="line">./configure --prefix=/usr/git              <span class="meta">#指定安装目录</span></span><br><span class="line"><span class="built_in">make</span> profix=/usr/git -j <span class="number">4</span> &amp;&amp; <span class="built_in">make</span> install  <span class="meta">#四线程编译及安装</span></span><br></pre></td></tr></table></figure><ol start="6"><li>添加环境变量</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo <span class="string">"export PATH=<span class="variable">$PATH</span>:/usr/git/bin"</span> &gt;&gt; /etc/profile</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><ol start="7"><li>重新检查版本</li></ol><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="comment">--version</span></span><br></pre></td></tr></table></figure><p>更多git命令教程可以学习廖雪峰的 <a href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="noopener">git</a></p><p>关于 windows git 图形工具可以参考 <a href="../gitclient">此篇</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input id=&quot;toc-toggle&quot; type=&quot;checkbox&quot;&gt;

&lt;!-- toc --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href
      
    
    </summary>
    
      <category term="服务搭建" scheme="demonxian3.github.io/categories/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
      <category term="git" scheme="demonxian3.github.io/tags/git/"/>
    
      <category term="linux" scheme="demonxian3.github.io/tags/linux/"/>
    
      <category term="server" scheme="demonxian3.github.io/tags/server/"/>
    
  </entry>
  
  <entry>
    <title>说说换行和回车</title>
    <link href="demonxian3.github.io/2017/05/29/17052901_crlf/"/>
    <id>demonxian3.github.io/2017/05/29/17052901_crlf/</id>
    <published>2017-05-29T10:33:37.000Z</published>
    <updated>2019-06-19T04:35:05.057Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><ul><li><a href="#0x00-yin-yan">0x00 引言</a></li><li><a href="#0x01-jie-shi">0x01 解释</a></li><li><a href="#0x02-shi-yan">0x02 实验</a></li><li><a href="#0x03-li-shi">0x03 历史</a></li><li><a href="#0x04-jie-jue">0x04 解决</a></li><li><a href="#https-blogimg-1252836741-cos-ap-chengdu-myqcloud-com-cr6-png"><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/cr6.png" alt></a></li></ul><!-- tocstop --></div><div id="0x00-yin-yan"></div> <br><br><br><h1>0x00 引言</h1><blockquote><p>最近在php还有c#以及memcache的shell当中经常看到\r\n的写法，刚开始还没注意，</p><p>不过后面感觉这样写有些不对头，\r表示回车  \n表示换行，那这样不是换行了两次吗？</p><p>为了解决疑惑，问了下度娘，总算对 \r\n 有了新的认识。</p></blockquote><div id="0x01-jie-shi"></div> <br><br><br><h1>0x01 解释</h1><blockquote><p>首先 \r 是回车， \n 是换行，这毋庸置疑，但是前者的作用只是将光标移到行首，后者是将光标移到下一行。</p><p>也就是说 你敲键盘的 回车键<enter> 其实是回车和换行的组合键(\r\n)。不同的操作系统，其原理也不一样</enter></p><p>如果把一个文本的空格和回车等都反转义，就是显示出转义符，那么你会看到</p></blockquote><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">windows每行结尾都有<span class="symbol">\r</span><span class="symbol">\n</span></span><br><span class="line"></span><br><span class="line">Unix每行结尾只有<span class="symbol">\n</span></span><br><span class="line"></span><br><span class="line">Mac每行结尾只有<span class="symbol">\r</span></span><br></pre></td></tr></table></figure><p>三个操作系统是故意这么不统一，也难怪 linux 文件拿到 windows 下会错行的原因。下面做两个小实验看看问题现象</p><div id="0x02-shi-yan"></div> <br><br><br><h1>0x02 实验</h1><p>1.在 Linux 下vim a.txt 编辑一个文本</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/cr0.png" alt></p><p>2.把这个文本弄到windows下面看看</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/cr1.png" alt></p><p>可以发现错行了!!! 因为对于windows上面的换行条件还少了个字符 <code>\r</code> 那windows下看起来正常的文件在Linux下面又会是啥样？</p><p>3.在Windows下编辑一个文本</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/cr2.png" alt></p><p>通过ftp传到Linux下后，打开</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/cr3.png" alt></p><p>简直惨不忍睹，H和o都合并再一起了，^M又是啥玩意，不着急后面会讲到</p><p>可见得我们在平时用windows时，敲一个回车键，即是回车，又是换行。</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">\n</span>  软回车</span><br><span class="line">在Windows 中表示换行且回到下一行的最开始位置。</span><br><span class="line">在Linux、unix 中只表示换行，但不会回到下一行的开始位置。</span><br></pre></td></tr></table></figure><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">\r</span>  软空格</span><br><span class="line">在Linux、unix 中表示返回到当行的最开始位置。</span><br><span class="line">在Mac OS 中表示换行且返回到下一行的最开始位置。</span><br></pre></td></tr></table></figure><p> 下面是回车和换行的历史，有兴趣的人可以阅读下</p><div id="0x03-li-shi"></div> <br><br><br><h1>0x03 历史</h1><blockquote><p>回车(carriage return)和换行(line feed)两个概念的来历和区别</p><p>计算机还没出生之前，有一种玩意叫电传打字机，每分钟可以打10个字符。但是他有个问题，<br>就是打完一行换行的时候要用去0.2秒，大约是打两个字符的时间。<br>而就在他使用这0.2秒进行换行的时候又有新的字符传过来，那么新的字符将会丢失。<br>于是，研制人员想了个办法解决这个问题，就是在每行后面加两个字符表示结束的字符。<br>一个叫做回车，它用来告诉打字机把打印头定位于在左边界，另个叫换行，它用来告诉打字机<br>把纸往上挪一下。这样打字机在换行时使用的0.2秒时间丢弃的只是两个不需要显示出来的字符。</p><p>计算机诞生后，这两个字符也搬了过来，那时候存储器很贵，一些科学家觉得每次换行都要花费空间来放下这两<br>个字符太浪费了，加一个就可以了，于是出现了分歧。Unix系统每行结尾只有\n，Windows系统每行结尾是\r<br>\n，Mac系统每行结尾是\r。一个直接的结果就是如我上面的实验那样，同一文本在不同系统下会出现不同的结<br>果，这当然不是我们想要的效果</p><p>Dos 和 Windows 采用回车+换行 CR/LF 表示下一行即 ^M$<br>Unix 和 Linux 采用换行 LF 表示下一行即 $<br>Mac 采用CR表示下一行 即^M<br>CR 用\r表示 十进制ASCII为13 十六进制0x0D<br>LF 用\n表示  ASCII为10 十六进制0X0A</p></blockquote><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/cr4.png" alt></p><p>看！有图有真相</p><div id="0x04-jie-jue"></div> <br><br><br><h1>0x04 解决</h1><p>需要注意的是，不同平台之间用FTP协议传输文件时，在ASCII模式下传输可能会自动对换行进行转换，从而导致字节数的变更<br>如果不想ftp对文件的修改，可以使用Bin模式进行文本传输。那么如何解决不同平台的文本错行显示呢？</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/cr5.png" alt></p><p>(1)使用sed 命令进行替换</p><figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -e <span class="string">'s/^M//g'</span>  old.txt &gt; <span class="keyword">new</span><span class="type"></span>.txt</span><br></pre></td></tr></table></figure><p> 注意这个^M是先按Ctrl+V然后按Ctrl+Shift+M 才能打出来的不是直接打^M</p><div id></div> <br><br><br><h1><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/cr6.png" alt></h1><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/cr7.png" alt></p><p>(2)vim编辑器的替换命令</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">:%s/^M//g</span></span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/cr8.png" alt><br>  =&gt;<br><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/cr9.png" alt></p><p>同样^M不是直接打出来的，会变成蓝色，而不是白色</p><p>(3)使用命令行</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tr</span> -d <span class="string">"\r"</span>&lt;dosfile &gt; unixfile</span><br></pre></td></tr></table></figure><p>(4)使用dos2unix工具</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dos2unix <span class="selector-tag">a</span><span class="selector-class">.txt</span>        #直接转换</span><br><span class="line">dos2unix -n <span class="selector-tag">a</span><span class="selector-class">.txt</span> <span class="selector-tag">b</span><span class="selector-class">.txt</span> #保留源文件</span><br></pre></td></tr></table></figure><p>(5)FTP传输工具</p><p>如果是以ASCII模式传输，那么FTP会帮你转换<br>如果是以Binary模式传输，那么FTP保留原文件</p><p>总结<br>如果有些细节上的问题不重视，那么可能就会带来头疼的问题，或者不必要的麻烦。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input id=&quot;toc-toggle&quot; type=&quot;checkbox&quot;&gt;

&lt;!-- toc --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href
      
    
    </summary>
    
      <category term="技术杂谈" scheme="demonxian3.github.io/categories/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/"/>
    
    
  </entry>
  
  <entry>
    <title>SVN 版本控制服务搭建</title>
    <link href="demonxian3.github.io/2017/05/18/17051801_svnser/"/>
    <id>demonxian3.github.io/2017/05/18/17051801_svnser/</id>
    <published>2017-05-18T21:17:30.000Z</published>
    <updated>2019-06-17T00:16:38.000Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><ul><li><a href="#0x01-huan-jing-zhun-bei">0x01.环境准备</a></li><li><a href="#0x02-xiu-gai-pei-zhi">0x02 修改配置</a></li><li><a href="#0x03-qi-dong-fu-wu">0x03 启动服务</a></li><li><a href="#0x04-shi-yong-ce-shi">0x04 使用测试</a></li><li><a href="#0x05-yin-ru-http-mo-kuai">0x05 引入 Http 模块</a></li><li><a href="#0x06-shi-yong-xiao-wu-gui">0x06 使用小乌龟</a></li></ul><!-- tocstop --></div>[Svn(subversion)][11]是一个开源代码管理的控制系统，用来管理和存储开发的源代码，基于C/S模式。可以单独提供服务，也可以结合http服务来实现。<p><a href="http://www.tigris.org" target="_blank" rel="noopener">tigris</a></p><table><thead><tr><th>运行方式</th><th>运行端口</th><th>访问方法</th></tr></thead><tbody><tr><td>svn单独服务</td><td>3690</td><td>svn://</td></tr><tr><td>http结合服务</td><td>80</td><td>http://</td></tr></tbody></table><div id="0x01-huan-jing-zhun-bei"></div> <br><br><br><h1>0x01.环境准备</h1><ol><li>安装svn 和 apache 服务，其中mod_dav_svn是用来衔接svn和apache的。</li></ol><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum –y <span class="keyword">install </span><span class="keyword">subversion </span>httpd mod_dav_svn</span><br></pre></td></tr></table></figure><ol start="2"><li>查看是否注册端口</li></ol><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="regexp">/etc/</span>services | <span class="keyword">grep</span> svn –color</span><br></pre></td></tr></table></figure><ol start="3"><li>创建存放版本库</li></ol><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /web</span><br></pre></td></tr></table></figure><ol start="4"><li>创建web项目实例</li></ol><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">svnadmin create /web/www<span class="selector-class">.demonxian3</span><span class="selector-class">.cn</span></span><br><span class="line">svnadmin create /web/www<span class="selector-class">.demonxian2</span><span class="selector-class">.cn</span></span><br></pre></td></tr></table></figure><ol start="5"><li>查看svn版本相关文件</li></ol><p>可以在通过svnadmin创建的目录看到会生成一些文件。</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn2.png" alt></p><table><thead><tr><th>目录</th><th>作用</th></tr></thead><tbody><tr><td>dav</td><td>提供apache和mod_dav_svn使用的目录，这个要自己手动创建</td></tr><tr><td>db</td><td>存放版本控制的数据库文件</td></tr><tr><td>hooks</td><td>存放hook脚本文件</td></tr><tr><td>locks</td><td>存放svn监控锁定数据的目录，用来追踪存取文件库的客户端</td></tr><tr><td>conf</td><td>存放配置文件（用户访问账号和权限等）</td></tr><tr><td>format</td><td>存放一个整数表示当前的文件库配置的版本</td></tr></tbody></table><p>下面是conf目录的文件内容</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn3.png" alt></p><table><thead><tr><th>文件</th><th>作用</th></tr></thead><tbody><tr><td>authz</td><td>认证权限的配置</td></tr><tr><td>passwd</td><td>用户密码的配置</td></tr><tr><td>svnserve</td><td>服务器相关配置</td></tr></tbody></table><div id="0x02-xiu-gai-pei-zhi"></div> <br><br><br><h1>0x02 修改配置</h1><p>(1)修改svnserve服务配置</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">vim</span> /web/www.demonxian3.<span class="keyword">cn</span>/<span class="keyword">conf</span>/svnserve.<span class="keyword">conf</span></span><br></pre></td></tr></table></figure><p>下面几个字段默认都是注释的，需要把注释去掉</p><blockquote><p>anao-access = read                      #表示匿名用户可读 值有：read write none<br>auth-access = write                     #表示认证用户可写，值同上<br>password-db = passwd                    #表示指定密码库的配置文件<br>authz-db = authz                        #表示指定认证权限配置文件<br>realm = <a href="http://www.demonxian3.cn" target="_blank" rel="noopener">www.demonxian3.cn</a>         　    #登录提示信息 注意上面字段必须顶格，即前面不能留空格，否则会报错 </p></blockquote><p>(2)修改passwd用户密码配置</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /web/www<span class="selector-class">.demonxian3</span><span class="selector-class">.cn</span>/conf/passwd</span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn4.png" alt></p><p>添加三个用户，密码均为<code>123456</code></p><p>(3) 修改authz权限配置</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /web/www<span class="selector-class">.demonxian3</span><span class="selector-class">.cn</span>/conf/authz</span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn5.png" alt></p><p>在groups域 里定义一个CG组，组员有demon1,dmeon2<br>在 根域（自己写上的）里定义权限，CG组只有读权限，demon3可写可读，其他人无权限</p><div id="0x03-qi-dong-fu-wu"></div> <br><br><br><h1>0x03 启动服务</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svnserve -d -r <span class="regexp">/web/</span>    <span class="comment">#-d 以守护运行 -r 以root用户运行 web 就是自己创建的软件版本库</span></span><br></pre></td></tr></table></figure><p>查看端口</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn6.png" alt></p><p>svn常用的命令 <a href="http://blog.csdn.net/ithomer/article/details/6187464" target="_blank" rel="noopener">更多请参见</a></p><table><thead><tr><th>cmd</th><th>func</th></tr></thead><tbody><tr><td>import</td><td>上传代码</td></tr><tr><td>checkout</td><td>下载代码</td></tr><tr><td>update</td><td>更新代码</td></tr><tr><td>status</td><td>查看状态</td></tr><tr><td>diff</td><td>差异检测</td></tr><tr><td>log</td><td>历史记录</td></tr><tr><td>list</td><td>显示目录</td></tr><tr><td>cat</td><td>查看内容</td></tr><tr><td>resolve</td><td>解决冲突</td></tr><tr><td>switch</td><td>切换版本库</td></tr><tr><td>revert</td><td>恢复</td></tr><tr><td>add</td><td>增加</td></tr><tr><td>delete</td><td>删除</td></tr><tr><td>copy</td><td>复制</td></tr><tr><td>move</td><td>移动</td></tr></tbody></table><div id="0x04-shi-yong-ce-shi"></div> <br><br><br><h1>0x04 使用测试</h1><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir local                                                             <span class="comment">#创建本地开发目录</span></span><br><span class="line">touch local<span class="regexp">/1.html local/</span><span class="number">2</span>.html                                         <span class="comment">#创建模拟web页面</span></span><br><span class="line">svn import <span class="regexp">/root/</span>local<span class="regexp">/ file:/</span><span class="regexp">//</span>web<span class="regexp">/www.demonxian3.cn/</span> -m <span class="string">"first edit"</span>  <span class="comment">#导入</span></span><br><span class="line">svn checkout svn:<span class="regexp">//</span><span class="number">192.168</span>.<span class="number">1.112</span><span class="regexp">/www.demonxian3.cn/</span> download            <span class="comment">#取出代码</span></span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn7.png" alt></p><blockquote><p>1.取代码时会弹出身份验证，默认是root用户，回车即可输入用户名和密码。<br>2.需要注意登录的用户需要有读取权限否则不能下载<br>3.取出代码后会在当前生成download目录，在里面进行相关的代码开发即可</p></blockquote><p>下面模拟代码开发后的更新。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">touch download/<span class="number">3</span>.html</span><br><span class="line">echo “hello world” &gt; <span class="number">2</span>.html</span><br><span class="line">svn add <span class="number">3</span><span class="selector-class">.html</span>                                #在svn里同步添加新文件</span><br><span class="line">svn commit –m “second edit”        #提交代码，这里也需要用户验证。</span><br></pre></td></tr></table></figure><p>如果输入的账号和密码没有写入的权限，会写入失败 , 下面来搭建http + svn 服务</p><div id="0x05-yin-ru-http-mo-kuai"></div> <br><br><br><h1>0x05 引入 Http 模块</h1><p>1.查看apache是否引入svn模块   </p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">vim</span> /etc/httpd/<span class="keyword">conf</span>.d/subversion.<span class="keyword">conf</span></span><br></pre></td></tr></table></figure><p>如果看到两个字段则表示引入成功</p><blockquote><p>LoadModule dav_svn_module modules/mod_dav_svn.so<br>LoadModule authz_svn_module modules/mod_authz_svn.so</p></blockquote><p>两个模块的物理路径</p><p>/etc/httpd/modules/mod_authz_svn.so<br>/etc/httpd/modules/mod_dav_svn.so</p><p>2.编辑subversion模块配置文件</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/etc/</span>httpd<span class="regexp">/conf.d/</span>subversion.conf  <span class="comment">#在参照末尾location标签添加下面的内容</span></span><br></pre></td></tr></table></figure><blockquote><p>&lt;Location /web&gt;<br>  DAV svn<br>  SVNParentPath<br>/web                        </p><p> #指定svn根目录<br>  AuthType<br>Basic                                </p><p> #Basic认证方式<br>  AuthName ”<a href="http://www.demonx.cn”" target="_blank" rel="noopener">www.demonx.cn”</a>             #认证显示提示信息<br>  AuthUserFile /web/svn/passwd           #用户密码文件<br>  AuthzSVNAccessFile /web/svn/authz   #用户配置文件<br>  Require<br>vaild-user                   </p><pre><code>#要求用户认证不许匿名</code></pre></blockquote><p>3.创建apache访问svn相关配置文件</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /web/svn</span><br></pre></td></tr></table></figure><p>创建用户密码文件并配置密码</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">htpasswd –c <span class="meta-keyword">/web/</span>svn/passwd dem1    <span class="meta">#参数-c表示创建文件</span></span><br><span class="line">htpasswd <span class="meta-keyword">/web/</span>svn/passwd dem2</span><br></pre></td></tr></table></figure><p>创建权限配置文件</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="regexp">/web/</span>svn<span class="regexp">/authz</span></span><br></pre></td></tr></table></figure><p> #添加下面的内容</p><blockquote><p>[groups]<br>all = dem1,dem2<br>[/]<br>dem1 = rw<br>[<a href="http://www.demonxian3.cn:/]" target="_blank" rel="noopener">www.demonxian3.cn:/]</a><br>@all = rw<br>[<a href="http://www.demonxian2.cn:/]" target="_blank" rel="noopener">www.demonxian2.cn:/]</a><br>dem1 = rw<br>dem2 = r</p></blockquote><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">service httpd restart</span></span><br></pre></td></tr></table></figure><p>然后使用浏览器访问，会发现需要用户认证</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn8.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn9.png" alt></p><div id="0x06-shi-yong-xiao-wu-gui"></div> <br><br><br><h1>0x06 使用小乌龟</h1><p>使用小乌龟进行代码的上传和下载，虽然这个是开发人员做的事，但作为运维人员多少也应该了解一点。<a href="http://tortoisesvn.net/downloads.html" target="_blank" rel="noopener">小乌龟的下载的地址</a></p><p>下载好后会在右键生成svn相关插件</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn10.png" alt></p><p>配置相关选项,使用svn服务访问配置如下</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn11.png" alt></p><p>注意URL上不能把根目录/web也填写上去了。</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn12.png" alt></p><p>输入用户名和密码，不要保存, 如果使用httpd服务访问svn版本管理器，配置如下</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn13.png" alt><br><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn14.png" alt><br><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn15.png" alt></p><p>成功把代码down下来了，提交一样点击右键commit即可，如果有时候上交失败如下</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn16.png" alt></p><p>很有可能你的目录权限不够，修改一下即可 如我的：  chmod -R 777 /web</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/svn17.png" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input id=&quot;toc-toggle&quot; type=&quot;checkbox&quot;&gt;

&lt;!-- toc --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href
      
    
    </summary>
    
      <category term="服务搭建" scheme="demonxian3.github.io/categories/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
      <category term="linux" scheme="demonxian3.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Mqtt服务搭建</title>
    <link href="demonxian3.github.io/2017/05/10/17051001_mqttser/"/>
    <id>demonxian3.github.io/2017/05/10/17051001_mqttser/</id>
    <published>2017-05-10T14:40:42.000Z</published>
    <updated>2019-06-17T00:15:48.000Z</updated>
    
    <content type="html"><![CDATA[<div class="toc"><label for="toc-toggle" class="toc-toggle">M</label><input id="toc-toggle" type="checkbox"><!-- toc --><ul><li><a href="#0x00-mqtt-jian-jie">0x00 Mqtt简介:</a></li><li><a href="#0x01-fu-wu-qi-bu-shu">0x01 服务器部署：</a><ul><li><a href="#1-an-zhuang-ji-chu-ruan-jian">1.安装基础软件</a></li><li><a href="#2-xia-zai-yuan-ma-bao">2.下载源码包</a></li><li><a href="#3-jie-ya-yuan-ma-bao">3.解压源码包</a></li><li><a href="#4-bian-yi-zhun-bei">4.编译准备</a></li><li><a href="#5-an-zhuang-tcp-wrappers">5.安装tcp-wrappers</a></li><li><a href="#6-bian-yi-an-zhuang-c-ares">6.编译安装c-ares</a></li><li><a href="#7-an-zhuang-libuuid">7.安装libuuid</a></li><li><a href="#8-an-zhuang-websocket">8.安装websocket</a></li><li><a href="#9-kai-shi-an-zhuang-mosquitto-fu-wu">9.开始安装mosquitto服务</a></li><li><a href="#10-xiu-gai-lian-jie-ku">10.修改链接库</a></li></ul></li><li><a href="#0x03-kai-shi-ce-shi">0x03 开始测试</a><ul><li><a href="#1-tian-jia-zu-he-yong-hu">1.添加组和用户</a></li><li><a href="#2-qi-yong-bei-fen-he-bian-ji-pei-zhi-wen-jian">2.启用,备份和编辑配置文件</a></li></ul></li></ul><!-- tocstop --></div>测试环境:CentOS64位<div id="0x00-mqtt-jian-jie"></div> <br><br><br><h1>0x00 Mqtt简介:</h1><blockquote><p>MQTT（Message Queuing Telemetry Transport，消息队列遥测传输）</p><p>是IBM开发的一个即时通讯协议，有可能成为物联网的重要组成部分。</p><p>该协议支持所有平台，几乎可以把所有联网物品和外部连接起来，</p><p>被用来当做传感器和制动器（比如通过Twitter让房屋联网）的通信协议。   </p></blockquote><div id="0x01-fu-wu-qi-bu-shu"></div> <br><br><br><h1>0x01 服务器部署：</h1><div id="1-an-zhuang-ji-chu-ruan-jian"></div> <br><br><br><h3>1.安装基础软件</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> gcc-c++</span><br><span class="line"></span><br><span class="line">yum <span class="keyword">install</span> cmake</span><br><span class="line"></span><br><span class="line">yum <span class="keyword">install</span> openssl-devel  //mosquitto默认支持openssl</span><br></pre></td></tr></table></figure><div id="2-xia-zai-yuan-ma-bao"></div> <br><br><br><h3>2.下载源码包</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget <span class="symbol">http:</span>/<span class="regexp">/mosquitto.org/files</span><span class="regexp">/source/mosquitto</span>-<span class="number">1.4</span>.<span class="number">4</span>.tar.gz</span><br><span class="line"></span><br><span class="line">wget <span class="symbol">http:</span>/<span class="regexp">/c-ares.haxx.se/download</span><span class="regexp">/c-ares-1.10.0.tar.gz --no-check-certificate</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">wget https:/</span><span class="regexp">/github.com/warmcat</span><span class="regexp">/libwebsockets/archive</span><span class="regexp">/v1.3-chrome37-firefox30.tar.gz</span></span><br></pre></td></tr></table></figure><div id="3-jie-ya-yuan-ma-bao"></div> <br><br><br><h3>3.解压源码包</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar xf c-ares<span class="number">-1.10</span><span class="number">.0</span>.tar.gz &amp;&amp; mv c-ares<span class="number">-1.10</span><span class="number">.0</span> /usr/local/src/</span><br><span class="line"></span><br><span class="line">tar xf v1<span class="number">.3</span>-chrome37-firefox30 -C /usr/local/src/</span><br><span class="line"></span><br><span class="line">tar xf mosquitto<span class="number">-1.4</span><span class="number">.4</span>.tar.gz -C /usr/local/src/</span><br></pre></td></tr></table></figure><div id="4-bian-yi-zhun-bei"></div> <br><br><br><h3>4.编译准备</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/usr/</span>local<span class="regexp">/src/m</span>osquitto-<span class="number">1.4</span>.<span class="number">4</span><span class="regexp">/</span></span><br></pre></td></tr></table></figure><p>vim compiling.txt  #这个文件里有写需要的依赖包, 内容如下</p><blockquote><p>The following packages are required for mosquitto:</p><ul><li><font color="red">tcp-wrappers</font> (optional, package name libwrap0-dev)</li><li><font color="red">openssl</font> (version 1.0.0 or greater if TLS-PSK support is needed, can be disabled)</li><li><font color="red">c-ares </font>(for DNS-SRV support, can be disabled)</li><li><font color="red">libuuid</font> (from e2fsprogs, can be disabled)</li><li>On Windows, the Redhat pthreads library is required if threading support is<br>to be included.<br>To compile, run “make”, but also see the file config.mk for more details on the<br>various options that can be compiled in.</li></ul></blockquote><p>vim config.mk  #这个文件里包含多个选项, 可以选择自己需要的功能<br>常见功能说明</p><table><thead><tr><th>选项</th><th>功能</th><th>依赖</th></tr></thead><tbody><tr><td>WITH_SRV</td><td>启用c-areas库, DNS查找的库</td><td>missing ares.h</td></tr><tr><td>WITH_UUID</td><td>启用lib-uuid为每个连接客户端生成uuid missing</td><td>uuid.h</td></tr><tr><td>WITH_WEBSOCKET</td><td>启用WebSocket协议 missing</td><td>libwebsockets.h</td></tr></tbody></table><div id="5-an-zhuang-tcp-wrappers"></div> <br><br><br><h3>5.安装tcp-wrappers</h3><p>因为本机已经有了, 所以就不安装了</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm –<span class="keyword">qa</span> | <span class="keyword">grep</span> tcp_wrap*</span><br></pre></td></tr></table></figure><blockquote><p>tcp_wrappers-7.6-57.el6.x86_64<br>tcp_wrappers-libs-7.6-57.el6.x86_64</p></blockquote><div id="6-bian-yi-an-zhuang-c-ares"></div> <br><br><br><h3>6.编译安装c-ares</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd  /usr/<span class="keyword">local</span>/src/c-ares<span class="number">-1.10</span><span class="number">.0</span></span><br><span class="line">./configure</span><br><span class="line"><span class="built_in">make</span></span><br><span class="line"><span class="built_in">make</span> install</span><br></pre></td></tr></table></figure><div id="7-an-zhuang-libuuid"></div> <br><br><br><h3>7.安装libuuid</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> libuuid libuuid-devel</span><br></pre></td></tr></table></figure><div id="8-an-zhuang-websocket"></div> <br><br><br><h3>8.安装websocket</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/src/libwebsockets-1.3-chrome37-firefox30/</span><br><span class="line">vim README.build  <span class="comment">#参照说明文档内容编译安装即内容如下</span></span><br></pre></td></tr></table></figure><blockquote><p> Generate the build files (default is Make files):<br>       <font color="blue">cd /path/to/src<br>       mkdir build<br>       cd build<br>       cmake ..</font><br>       (NOTE: The build/ directory can have any name and be located anywhere<br>        on your filesystem, and that the argument “..” given to cmake is simply<br>        the source directory of libwebsockets containing the CMakeLists.txt<br>        project file. All examples in this file assumes you use “..”)<br>       NOTE2<br>       A common option you may want to give is to set the install path, same<br>       as <font color="blue">–prefix= with autotools</font>.  It defaults to /usr/local.<br>       You can do this by, eg<br>       <font color="red">cmake .. -DCMAKE_INSTALL_PREFIX:PATH=/usr#指定安装路径</font><br>       NOTE3<br>       On machines that want libraries in lib64, you can also add the<br>       following to the cmake line<br>       <font color="red">-DLIB_SUFFIX=64#指定64位库</font><br>       NOTE4<br>       If you are building against a non-distro OpenSSL (eg, in order to get<br>       access to ALPN support only in newer OpenSSL versions) the nice way to<br>       express that in one cmake command is eg,<br>       <font color="red">-DOPENSSL_ROOT_DIR=/usr/local/ssl#指定ssl文件位置</font></p></blockquote><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="keyword">build</span>; cd <span class="keyword">build</span>;</span><br><span class="line">cmake .. -DLIB_SUFFIX=64</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><div id="9-kai-shi-an-zhuang-mosquitto-fu-wu"></div> <br><br><br><h3>9.开始安装mosquitto服务</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> /usr/local/src/mosquitto-<span class="number">1.4</span>.<span class="number">4</span>/</span><br><span class="line"><span class="keyword">make</span> &amp;&amp; <span class="keyword">make</span> install &amp;&amp; <span class="keyword">echo</span> $?</span><br></pre></td></tr></table></figure><p>默认文件路径</p><table><thead><tr><th>作用</th><th>路径</th></tr></thead><tbody><tr><td>Mosquitto server</td><td>/usr/local/sbin</td></tr><tr><td>Configure</td><td>/etc/mosquitto</td></tr><tr><td>Utility command</td><td>/usr/local/bin</td></tr></tbody></table><div id="10-xiu-gai-lian-jie-ku"></div> <br><br><br><h3>10.修改链接库</h3><blockquote><p>由于操作系统版本及架构原因, 很容易出现安装之后的链接库无法被找到, </p><p>如启动mosquitto客户端可能出现找不到libmosquitto.so.1文件</p><p>因此需要添加链接库路径</p></blockquote><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/<span class="class"><span class="keyword">lib</span>/<span class="title">libmosquitto</span>.<span class="title">so</span>.1 /<span class="title">usr</span>/<span class="title">lib</span>/<span class="title">libmosquitto</span>.<span class="title">so</span>.1</span></span><br><span class="line">ldconfig</span><br></pre></td></tr></table></figure><p>否则会出现注意的错误</p><blockquote><p><font color="red">error while loading shared libraries: libmosquitto.so.1: cannot open shared object file: No such file or directory</font></p></blockquote><p>还有一些编译时可能会遇到的错误</p><blockquote><p><font color="red">mosquitto.c:871: error: ‘struct mosquitto’ has no member named ‘achan’</font></p></blockquote><p>如果不使用可以在config.mk 把WITH_SRV功能关闭即可</p><p>其他问题也差不多, 基本就是缺少相应的依赖包, 解决办法两个</p><blockquote><p>1 在config.mk关闭相关选项<br>2 把依赖包装上</p></blockquote><p>嫌麻烦可以直接 </p><p><code>yum install mosquitto mosquitto-clients –y</code> </p><p>一句话搞定上面所有</p><div id="0x03-kai-shi-ce-shi"></div> <br><br><br><h1>0x03 开始测试</h1><div id="1-tian-jia-zu-he-yong-hu"></div> <br><br><br><h3>1.添加组和用户</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">groupadd</span> mosquitto</span><br><span class="line">useradd –g mosquitto mosquitto</span><br></pre></td></tr></table></figure><div id="2-qi-yong-bei-fen-he-bian-ji-pei-zhi-wen-jian"></div> <br><br><br><h3>2.启用,备份和编辑配置文件</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /etc/mosquitto/mosquitto<span class="selector-class">.conf</span><span class="selector-class">.example</span> /etc/mosquitto/mosquitto<span class="selector-class">.conf</span>  #配置文件如下</span><br></pre></td></tr></table></figure><blockquote><p># 服务进程的PID<br>#pid_file /var/run/mosquitto.pid<br># 服务进程的系统用户<br>#user mosquitto<br># 服务绑定的IP地址<br>#bind_address<br># 服务绑定的端口号<br>#port 1883<br># 允许的最大连接数, -1表示没有限制<br>#max_connections -1<br># 允许匿名用户<br>#allow_anonymous true</p></blockquote><p>可以参考官网说明<a href="http://mosquitto.org/man/mosquitto-conf-5.html" target="_blank" rel="noopener">http://mosquitto.org/man/mosquitto-conf-5.html</a><br><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/mqttserver0.png" alt></p><p>配置代理：<br>实验测试：在本地开启三个终端来代表发布者, 服务代理, 订阅者。来模拟远程测试<br>正常情况下：发布者 服务代理 订阅者是分别是不同的host 也就是各自IP不同<br>所以若要测试远程通信可以使用发布和订阅命令时加上  -h  代理服务器的地址 </p><p>先在服务代理终端上开启mqtt服务</p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mosquitto -c /etc/mosquitto/mosquitto.<span class="keyword">conf</span> –<span class="built_in">d</span></span><br></pre></td></tr></table></figure><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/mqttserver1.png" alt></p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/mqttserver2.png" alt></p><p>然后再打开一个终端订阅主题, 模拟订阅者</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mosquitto <span class="comment">--help</span></span><br></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mosquitto_sub</span> -t goodafternoon   <span class="comment">#订阅goodafternoon主题</span></span><br></pre></td></tr></table></figure><p>这里如果报错：</p><blockquote><p>mosquitto_sub: error while loading shared libraries: libcares.so.2: cannot open shared object file: No such file or directory<br>原因：找不到libcares.so.2库文件</p></blockquote><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ld<span class="selector-class">.so</span><span class="selector-class">.conf</span><span class="selector-class">.d</span>/qt-x86_64.conf</span><br></pre></td></tr></table></figure><p>添加下面两行</p><blockquote><p>/usr/local/lib64<br>/usr/local/lib</p></blockquote><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ldconfig</span>  <span class="comment">#刷新配置</span></span><br></pre></td></tr></table></figure><p>然后再打开一个终端发布主题, 模拟发布者</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">mosquitto_pub</span> -t goodafternoon -m <span class="string">"hello world"</span>  <span class="comment">#向goodaftnoon发布消息</span></span><br></pre></td></tr></table></figure><p>可以在代理B端上看到连接日志</p><blockquote><p>1494420735: New connection from ::1 on port 1883.<br>1494420735: New client connected from ::1 as mosqsub/23455-demon-cli (c1, k60).<br>1494420850: New connection from ::1 on port 1883.<br>1494420850: New client connected from ::1 as mosqpub/23456-demon-cli (c1, k60).<br>1494420850: Client mosqpub/23456-demon-cli disconnected.</p></blockquote><p>而在订阅A端可以收到hello world这条消息！！</p><p><img src="https://blogimg-1252836741.cos.ap-chengdu.myqcloud.com/mqttserver3.png" alt></p><p>本文实验参考<a href="http://www.cnblogs.com/littleatp/p/4835879.html及一些大神的文章才得出的成功。感谢各位大神的努力和汗水。" target="_blank" rel="noopener">http://www.cnblogs.com/littleatp/p/4835879.html及一些大神的文章才得出的成功。感谢各位大神的努力和汗水。</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;div class=&quot;toc&quot;&gt;&lt;label for=&quot;toc-toggle&quot; class=&quot;toc-toggle&quot;&gt;M&lt;/label&gt;&lt;input id=&quot;toc-toggle&quot; type=&quot;checkbox&quot;&gt;

&lt;!-- toc --&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href
      
    
    </summary>
    
      <category term="服务搭建" scheme="demonxian3.github.io/categories/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
  </entry>
  
</feed>
